typeof browser<"u"&&(chrome=browser),(()=>{var ie={31432:(M,n)=>{"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.injectScript=n.autoRemoveScript=n.DOMMonitor=n.extractFeaturesFromDOM=void 0;const m="cliqz-adblocker-script",b=new Set(["br","head","link","meta","script","style","s"]);function A(l){return l.nodeType===1}function f(l){const s=[];for(const c of l)if(c.type==="attributes")A(c.target)&&s.push(c.target);else if(c.type==="childList")for(const _ of c.addedNodes)A(_)&&_.id!==m&&s.push(_);return s}function o(l){const s=new Set(["br","head","link","meta","script","style","s"]),c=new Set,_=new Set,E=new Set;for(const S of l)for(const O of[S,...S.querySelectorAll("[id]:not(html):not(body),[class]:not(html):not(body),[href]:not(html):not(body)")]){if(s.has(O.nodeName.toLowerCase()))continue;const P=O.id;P&&E.add(P);const v=O.classList;if(v)for(const R of v)c.add(R);const L=O.getAttribute("href");typeof L=="string"&&_.add(L)}return{classes:Array.from(c),hrefs:Array.from(_),ids:Array.from(E)}}n.extractFeaturesFromDOM=o;class C{constructor(s){this.cb=s,this.knownIds=new Set,this.knownHrefs=new Set,this.knownClasses=new Set,this.observer=null}queryAll(s){this.cb({type:"elements",elements:[s.document.documentElement]}),this.handleUpdatedNodes([s.document.documentElement])}start(s){this.observer===null&&s.MutationObserver!==void 0&&(this.observer=new s.MutationObserver(c=>{this.handleUpdatedNodes(f(c))}),this.observer.observe(s.document.documentElement,{attributes:!0,attributeFilter:["class","id","href"],childList:!0,subtree:!0}))}stop(){this.observer!==null&&(this.observer.disconnect(),this.observer=null)}handleNewFeatures({hrefs:s,ids:c,classes:_}){const E=[],S=[],O=[];for(const P of c)this.knownIds.has(P)===!1&&(E.push(P),this.knownIds.add(P));for(const P of _)this.knownClasses.has(P)===!1&&(S.push(P),this.knownClasses.add(P));for(const P of s)this.knownHrefs.has(P)===!1&&(O.push(P),this.knownHrefs.add(P));return E.length!==0||S.length!==0||O.length!==0?(this.cb({type:"features",classes:S,hrefs:O,ids:E}),!0):!1}handleUpdatedNodes(s){return s.length!==0?(this.cb({type:"elements",elements:s.filter(c=>b.has(c.nodeName.toLowerCase())===!1)}),this.handleNewFeatures(o(s))):!1}}n.DOMMonitor=C;function p(l){return`try{${l}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`}n.autoRemoveScript=p;function g(l,s){const c=s.createElement("script");c.type="text/javascript",c.id=m,c.async=!1,c.appendChild(s.createTextNode(p(l)));const _=s.head||s.documentElement||s;_!==null&&_.appendChild(c)}n.injectScript=g},99384:function(M,n,m){"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */var b=this&&this.__createBinding||(Object.create?function(p,g,l,s){s===void 0&&(s=l);var c=Object.getOwnPropertyDescriptor(g,l);(!c||("get"in c?!g.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return g[l]}}),Object.defineProperty(p,s,c)}:function(p,g,l,s){s===void 0&&(s=l),p[s]=g[l]}),A=this&&this.__exportStar||function(p,g){for(var l in p)l!=="default"&&!Object.prototype.hasOwnProperty.call(g,l)&&b(g,p,l)};Object.defineProperty(n,"__esModule",{value:!0}),n.classifySelector=n.SelectorType=n.PSEUDO_ELEMENTS=n.PSEUDO_CLASSES=n.EXTENDED_PSEUDO_CLASSES=n.matches=n.querySelectorAll=n.tokenize=n.parse=void 0;var f=m(48669);Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return f.parse}}),Object.defineProperty(n,"tokenize",{enumerable:!0,get:function(){return f.tokenize}});var o=m(31384);Object.defineProperty(n,"querySelectorAll",{enumerable:!0,get:function(){return o.querySelectorAll}}),Object.defineProperty(n,"matches",{enumerable:!0,get:function(){return o.matches}}),A(m(86904),n);var C=m(36404);Object.defineProperty(n,"EXTENDED_PSEUDO_CLASSES",{enumerable:!0,get:function(){return C.EXTENDED_PSEUDO_CLASSES}}),Object.defineProperty(n,"PSEUDO_CLASSES",{enumerable:!0,get:function(){return C.PSEUDO_CLASSES}}),Object.defineProperty(n,"PSEUDO_ELEMENTS",{enumerable:!0,get:function(){return C.PSEUDO_ELEMENTS}}),Object.defineProperty(n,"SelectorType",{enumerable:!0,get:function(){return C.SelectorType}}),Object.defineProperty(n,"classifySelector",{enumerable:!0,get:function(){return C.classifySelector}})},31384:(M,n)=>{"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.querySelectorAll=n.matches=n.matchPattern=void 0;function m(f,o){if(f.startsWith("/")&&(f.endsWith("/")||f.endsWith("/i"))){let C=!0;return f=f.slice(1),f.endsWith("/")?f=f.slice(0,-1):(f=f.slice(0,-2),C=!1),new RegExp(f,C===!1?"i":void 0).test(o)}return o.includes(f)}n.matchPattern=m;function b(f,o){if(o.type==="id"||o.type==="class"||o.type==="type"||o.type==="attribute")return f.matches(o.content);if(o.type==="list")return o.list.some(C=>b(f,C));if(o.type==="compound")return o.compound.every(C=>b(f,C));if(o.type==="pseudo-class"){if(o.name==="has"||o.name==="if")return o.subtree!==void 0&&A(f,o.subtree).length!==0;if(o.name==="not")return o.subtree!==void 0&&b(f,o.subtree)===!1;if(o.name==="has-text"){const{argument:C}=o;if(C===void 0)return!1;const p=f.textContent;return p===null?!1:m(C,p)}else if(o.name==="min-text-length"){const C=Number(o.argument);if(Number.isNaN(C)||C<0)return!1;const p=f.textContent;return p===null?!1:p.length>=C}}return!1}n.matches=b;function A(f,o){const C=[];if(o.type==="id"||o.type==="class"||o.type==="type"||o.type==="attribute")C.push(...f.querySelectorAll(o.content));else if(o.type==="list")for(const p of o.list)C.push(...A(f,p));else if(o.type==="compound")o.compound.length!==0&&C.push(...A(f,o.compound[0]).filter(p=>o.compound.slice(1).every(g=>b(p,g))));else if(o.type==="complex"){const p=o.left===void 0?[f]:A(f,o.left);if(o.combinator===" ")for(const g of p)C.push(...A(g,o.right));else if(o.combinator===">")for(const g of p)for(const l of g.children)b(l,o.right)===!0&&C.push(l);else if(o.combinator==="~")for(const g of p){let l=g;for(;(l=l.nextElementSibling)!==null;)b(l,o.right)===!0&&C.push(l)}else if(o.combinator==="+")for(const g of p){const l=g.nextElementSibling;l!==null&&b(l,o.right)===!0&&C.push(l)}}else if(o.type==="pseudo-class")for(const p of f.querySelectorAll("*"))b(p,o)===!0&&C.push(p);return C}n.querySelectorAll=A},36404:(M,n,m)=>{"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.classifySelector=n.SelectorType=n.PSEUDO_ELEMENTS=n.PSEUDO_CLASSES=n.EXTENDED_PSEUDO_CLASSES=void 0;const b=m(48669);n.EXTENDED_PSEUDO_CLASSES=new Set(["has","has-text","if"]),n.PSEUDO_CLASSES=new Set(["active","any","any-link","blank","checked","default","defined","dir","disabled","empty","enabled","first","first-child","first-of-type","focus","focus-visible","focus-within","fullscreen","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","matches","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","placeholder-shown","read-only","read-write","required","right","root","scope","target","valid","visited","where"]),n.PSEUDO_ELEMENTS=new Set(["after","before","first-letter","first-line"]);var A;(function(o){o[o.Normal=0]="Normal",o[o.Extended=1]="Extended",o[o.Invalid=2]="Invalid"})(A||(n.SelectorType=A={}));function f(o){if(o.indexOf(":")===-1)return A.Normal;const C=(0,b.tokenize)(o);let p=!1;for(const g of C)if(g.type==="pseudo-class"){const{name:l}=g;if(n.EXTENDED_PSEUDO_CLASSES.has(l)===!0)p=!0;else if(n.PSEUDO_CLASSES.has(l)===!1&&n.PSEUDO_ELEMENTS.has(l)===!1)return A.Invalid;if(p===!1&&g.argument!==void 0&&b.RECURSIVE_PSEUDO_CLASSES.has(l)===!0){const s=f(g.argument);if(s===A.Invalid)return s;s===A.Extended&&(p=!0)}}return p===!0?A.Extended:A.Normal}n.classifySelector=f},48669:(M,n,m)=>{"use strict";/*!
 * Based on parsel. Extended by RÃ©mi Berson for Ghostery (2021).
 * https://github.com/LeaVerou/parsel
 *
 * MIT License
 *
 * Copyright (c) 2020 Lea Verou
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.parse=n.tokenize=n.replace=n.gobbleParens=n.gobbleQuotes=n.isEscaped=n.RECURSIVE_PSEUDO_CLASSES=void 0;const b=m(86904);n.RECURSIVE_PSEUDO_CLASSES=new Set(["any","dir","has","host-context","if","if-not","is","matches","not","where"]);const A={attribute:new RegExp("\\[\\s*(?:(?<namespace>\\*|[-\\w]*)\\|)?(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(?<caseSensitive>[iIsS])?\\s*)?\\]","gu"),id:new RegExp("#(?<name>(?:[-\\w\\u{0080}-\\u{FFFF}]|\\\\.)+)","gu"),class:new RegExp("\\.(?<name>(?:[-\\w\\u{0080}-\\u{FFFF}]|\\\\.)+)","gu"),comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":new RegExp("::(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)(?:\\((?:\xB6*)\\))?","gu"),"pseudo-class":new RegExp(":(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)(?:\\((?<argument>\xB6*)\\))?","gu"),type:new RegExp("(?:(?<namespace>\\*|[-\\w]*)\\|)?(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)|\\*","gu")},f=new Set(["pseudo-class","pseudo-element"]),o=new Set([...f,"attribute"]),C=new Set(["combinator","comma"]),p=Object.assign({},A);p["pseudo-element"]=RegExp(A["pseudo-element"].source.replace("(?<argument>\xB6*)","(?<argument>.*?)"),"gu"),p["pseudo-class"]=RegExp(A["pseudo-class"].source.replace("(?<argument>\xB6*)","(?<argument>.*)"),"gu");function g(a,h){a.lastIndex=0;const y=a.exec(h);if(y===null)return;const w=y.index-1,T=y[0],d=h.slice(0,w+1),k=h.slice(w+T.length+1);return[d,[T,y.groups||{}],k]}const l=[a=>{const h=g(A.attribute,a);if(h===void 0)return;const[y,[w,{name:T,operator:d,value:k,namespace:x,caseSensitive:D}],F]=h;if(T!==void 0)return[y,{type:"attribute",content:w,length:w.length,namespace:x,caseSensitive:D,pos:[],name:T,operator:d,value:k},F]},a=>{const h=g(A.id,a);if(h===void 0)return;const[y,[w,{name:T}],d]=h;if(T!==void 0)return[y,{type:"id",content:w,length:w.length,pos:[],name:T},d]},a=>{const h=g(A.class,a);if(h===void 0)return;const[y,[w,{name:T}],d]=h;if(T!==void 0)return[y,{type:"class",content:w,length:w.length,pos:[],name:T},d]},a=>{const h=g(A.comma,a);if(h===void 0)return;const[y,[w],T]=h;return[y,{type:"comma",content:w,length:w.length,pos:[]},T]},a=>{const h=g(A.combinator,a);if(h===void 0)return;const[y,[w],T]=h;return[y,{type:"combinator",content:w,length:w.length,pos:[]},T]},a=>{const h=g(A["pseudo-element"],a);if(h===void 0)return;const[y,[w,{name:T}],d]=h;if(T!==void 0)return[y,{type:"pseudo-element",content:w,length:w.length,pos:[],name:T},d]},a=>{const h=g(A["pseudo-class"],a);if(h===void 0)return;const[y,[w,{name:T,argument:d}],k]=h;if(T!==void 0)return[y,{type:"pseudo-class",content:w,length:w.length,pos:[],name:T,argument:d,subtree:void 0},k]},a=>{const h=g(A.type,a);if(h===void 0)return;const[y,[w,{name:T,namespace:d}],k]=h;return[y,{type:"type",content:w,length:w.length,namespace:d,pos:[],name:T},k]}];function s(a){if(!a)return[];const h=[a];for(const w of l)for(let T=0;T<h.length;T++){const d=h[T];if(typeof d=="string"){const k=w(d);k!==void 0&&h.splice(T,1,...k.filter(x=>x.length!==0))}}let y=0;for(const w of h)typeof w!="string"&&(w.pos=[y,y+w.length],C.has(w.type)&&(w.content=w.content.trim()||" ")),y+=w.length;return(0,b.isAtoms)(h)?h:[]}function c(a,h,y,w){for(const T of h)for(const d of a)if(w.has(d.type)&&d.pos[0]<T.start&&T.start<d.pos[1]){const k=d.content;if(d.content=d.content.replace(y,T.str),d.content!==k){p[d.type].lastIndex=0;const x=p[d.type].exec(d.content);x!==null&&Object.assign(d,x.groups)}}}function _(a,h){let y=0;for(h-=1;h>=0&&a[h]==="\\";)y+=1,h-=1;return y%2!==0}n.isEscaped=_;function E(a,h,y){let w=y+1;for(;(w=a.indexOf(h,w))!==-1&&_(a,w)===!0;)w+=1;if(w!==-1)return a.slice(y,w+1)}n.gobbleQuotes=E;function S(a,h){let y=0;for(let w=h;w<a.length;w++){const T=a[w];if(T==="(")y+=1;else if(T===")")if(y>0)y-=1;else return;if(y===0)return a.slice(h,w+1)}}n.gobbleParens=S;function O(a,h,y,w){const T=[];let d=0;for(;(d=a.indexOf(y,d))!==-1;){const k=w(a,d);if(k===void 0)break;T.push({str:k,start:d}),a=`${a.slice(0,d+1)}${h.repeat(k.length-2)}${a.slice(d+k.length-1)}`,d+=k.length}return[T,a]}n.replace=O;function P(a){if(typeof a!="string")return[];if(a=a.trim(),a.length===0)return[];const[h,y]=O(a,"\xA7",'"',(D,F)=>E(D,'"',F)),[w,T]=O(y,"\xA7","'",(D,F)=>E(D,"'",F)),[d,k]=O(T,"\xB6","(",S),x=s(k);return c(x,d,/\(Â¶*\)/,f),c(x,h,/"Â§*"/,o),c(x,w,/'Â§*'/,o),x}n.tokenize=P;function v(a,{list:h=!0}={}){if(h===!0&&a.some(y=>y.type==="comma")){const y=[],w=[];for(let T=0;T<a.length;T+=1){const d=a[T];if(d.type==="comma"){if(w.length===0)throw new Error("Incorrect comma at "+T);const k=v(w,{list:!1});k!==void 0&&y.push(k),w.length=0}else w.push(d)}if(w.length===0)throw new Error("Trailing comma");{const T=v(w,{list:!1});T!==void 0&&y.push(T)}return{type:"list",list:y}}for(let y=a.length-1;y>=0;y--){const w=a[y];if(w.type==="combinator"){const T=v(a.slice(0,y)),d=v(a.slice(y+1));return d===void 0||w.content!==" "&&w.content!=="~"&&w.content!=="+"&&w.content!==">"?void 0:{type:"complex",combinator:w.content,left:T,right:d}}}if(a.length!==0&&(0,b.isAST)(a))return a.length===1?a[0]:{type:"compound",compound:[...a]}}function L(a,h,y,w){if(a!==void 0){if(a.type==="complex")L(a.left,h,y,a),L(a.right,h,y,a);else if(a.type==="compound")for(const T of a.compound)L(T,h,y,a);else a.type==="pseudo-class"&&a.subtree!==void 0&&y!==void 0&&y.type==="pseudo-class"&&y.subtree!==void 0&&L(a.subtree,h,y,a);h(a,w)}}function R(a,{recursive:h=!0,list:y=!0}={}){const w=P(a);if(w.length===0)return;const T=v(w,{list:y});return h===!0&&L(T,d=>{d.type==="pseudo-class"&&d.argument&&d.name!==void 0&&n.RECURSIVE_PSEUDO_CLASSES.has(d.name)&&(d.subtree=R(d.argument,{recursive:!0,list:!0}))}),T}n.parse=R},86904:(M,n)=>{"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.isAST=n.isAtoms=void 0;const m=null;function b(f){return f.every(o=>typeof o!="string")}n.isAtoms=b;function A(f){return f.every(o=>o.type!=="comma"&&o.type!=="combinator")}n.isAST=A},76060:(M,n,m)=>{"use strict";/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */Object.defineProperty(n,"__esModule",{value:!0}),n.injectCosmetics=void 0;const b=m(99384),A=m(31432);let f=!0,o=null,C=null;const p=new Set,g=[],l=new Map;function s(){o!==null&&(o.stop(),o=null)}function c(v){return new Promise(L=>{chrome.runtime.sendMessage(Object.assign({action:"getCosmeticsFilters"},v),R=>{R!==void 0&&L(R)})})}function _(v,L,R){var a;const h=(a=R.get(v))===null||a===void 0?void 0:a.get(L);if(h!==void 0)return h;const y=new Set((0,b.querySelectorAll)(v,L.ast));if(L.attribute!==void 0){let w=R.get(v);w===void 0&&(w=new Map,R.set(v,w));let T=w.get(L);T===void 0&&(T=new Set,w.set(L,T));for(const d of y)T.add(d)}return y}function E(){if(p.size===0||g.length===0)return;const v=new Map,L=new Map,R=[...p].filter(a=>a.isConnected===!0);p.clear();for(const a of R)for(const h of g)for(const y of _(a,h,v))h.remove===!0?(y.textContent="",y.remove()):h.attribute!==void 0&&l.has(y)===!1&&L.set(y,{selector:h,root:a});for(const[a,{selector:h,root:y}]of L.entries())h.attribute!==void 0&&(a.setAttribute(h.attribute,""),l.set(a,{selector:h,root:y}));for(const[a,{selector:h,root:y}]of[...l.entries()])h.attribute!==void 0&&(y.isConnected===!1||a.isConnected===!1||_(y,h,v).has(a)===!1)&&(l.delete(a),a.removeAttribute(h.attribute))}function S(v){if(g.length!==0&&!p.has(window.document.documentElement)){for(const L of v){if(L===window.document.documentElement){p.clear(),p.add(L);break}p.add(L)}C===null&&(C=setTimeout(()=>{C=null,E()},1e3))}}function O(v,{active:L,scripts:R,extended:a}){if(L===!1){f=!1,s();return}else f=!0;if(R)for(const h of R)try{(0,A.injectScript)(h,v.document)}catch{}a&&a.length>0&&(g.push(...a),S([v.document.documentElement]))}function P(v,L=!0,R=c){R({lifecycle:"start",ids:[],classes:[],hrefs:[]}).then(a=>O(v,a)),v.addEventListener("DOMContentLoaded",()=>{o=new A.DOMMonitor(a=>{a.type==="elements"?a.elements.length!==0&&S(a.elements):R(Object.assign(Object.assign({},a),{lifecycle:"dom-update"})).then(h=>O(v,h))}),o.queryAll(v),f&&L&&o.start(v)},{once:!0,passive:!0}),v.addEventListener("pagehide",s,{once:!0,passive:!0})}n.injectCosmetics=P},15764:M=>{var n=Object.defineProperty,m=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,f=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},o=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of b(t))!A.call(e,u)&&u!==r&&n(e,u,{get:()=>t[u],enumerable:!(i=m(t,u))||i.enumerable});return e},C=e=>o(n({},"__esModule",{value:!0}),e),p={};f(p,{default:()=>Te}),M.exports=C(p);var g=class z{static setBase(t){z.base=t}static findElement(t,r=null,i=!1){let u=null;return r!=null?u=Array.from(r.querySelectorAll(t.selector)):z.base!=null?u=Array.from(z.base.querySelectorAll(t.selector)):u=Array.from(document.querySelectorAll(t.selector)),t.textFilter!=null&&(u=u.filter(I=>{const V=I.textContent.toLowerCase();if(Array.isArray(t.textFilter)){let q=!1;for(const Y of t.textFilter)if(V.indexOf(Y.toLowerCase())!==-1){q=!0;break}return q}else if(t.textFilter!=null)return V.indexOf(t.textFilter.toLowerCase())!==-1})),t.styleFilters!=null&&(u=u.filter(I=>{const V=window.getComputedStyle(I);let q=!0;for(const Y of t.styleFilters){const J=V[Y.option];Y.negated?q=q&&J!==Y.value:q=q&&J===Y.value}return q})),t.displayFilter!=null&&(u=u.filter(I=>t.displayFilter?I.offsetHeight!==0:I.offsetHeight===0)),t.iframeFilter!=null&&(u=u.filter(()=>t.iframeFilter?window.location!==window.parent.location:window.location===window.parent.location)),t.childFilter!=null&&(u=u.filter(I=>{const V=z.base;z.setBase(I);const q=z.find(t.childFilter);return z.setBase(V),q.target!=null})),i?u:(u.length>1&&console.warn("Multiple possible targets: ",u,t,r),u[0])}static find(t,r=!1){const i=[];if(t.parent!=null){const u=z.findElement(t.parent,null,r);if(u!=null){if(u instanceof Array)return u.forEach(I=>{const V=z.findElement(t.target,I,r);V instanceof Array?V.forEach(q=>{i.push({parent:I,target:q})}):i.push({parent:I,target:V})}),i;{const I=z.findElement(t.target,u,r);I instanceof Array?I.forEach(V=>{i.push({parent:u,target:V})}):i.push({parent:u,target:I})}}}else{const u=z.findElement(t.target,null,r);u instanceof Array?u.forEach(I=>{i.push({parent:null,target:I})}):i.push({parent:null,target:u})}return i.length===0&&i.push({parent:null,target:null}),r?i:(i.length!==1&&console.warn("Multiple results found, even though multiple false",i),i[0])}};g.base=null;var l=g;function s(e){const t=l.find(e);if(e.type==="css")return!!t.target;if(e.type==="checkbox")return!!t.target&&t.target.checked}async function c(e,t){switch(e.type){case"click":return S(e);case"list":return O(e,t);case"consent":return P(e,t);case"ifcss":return v(e,t);case"waitcss":return L(e);case"foreach":return R(e,t);case"hide":return a(e);case"slide":return h(e);case"close":return w();case"wait":return y(e);case"eval":return T(e);default:throw"Unknown action type: "+e.type}}var _=0;function E(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}async function S(e){const t=l.find(e);return t.target!=null&&t.target.click(),E(_)}async function O(e,t){for(const r of e.actions)await c(r,t)}async function P(e,t){for(const r of e.consents){const i=t.indexOf(r.type)!==-1;r.matcher&&r.toggleAction?s(r.matcher)!==i&&await c(r.toggleAction):i?await c(r.trueAction):await c(r.falseAction)}}async function v(e,t){l.find(e).target?e.falseAction&&await c(e.falseAction,t):e.trueAction&&await c(e.trueAction,t)}async function L(e){await new Promise(t=>{let r=e.retries||10;const i=e.waitTime||250,u=()=>{const I=l.find(e);(e.negated&&I.target||!e.negated&&!I.target)&&r>0?(r-=1,setTimeout(u,i)):t()};u()})}async function R(e,t){const r=l.find(e,!0),i=l.base;for(const u of r)u.target&&(l.setBase(u.target),await c(e.action,t));l.setBase(i)}async function a(e){const t=l.find(e);t.target&&t.target.classList.add("Autoconsent-Hidden")}async function h(e){const t=l.find(e),r=l.find(e.dragTarget);if(t.target){const i=t.target.getBoundingClientRect(),u=r.target.getBoundingClientRect();let I=u.top-i.top,V=u.left-i.left;this.config.axis.toLowerCase()==="y"&&(V=0),this.config.axis.toLowerCase()==="x"&&(I=0);const q=window.screenX+i.left+i.width/2,Y=window.screenY+i.top+i.height/2,J=i.left+i.width/2,ee=i.top+i.height/2,se=document.createEvent("MouseEvents");se.initMouseEvent("mousedown",!0,!0,window,0,q,Y,J,ee,!1,!1,!1,!1,0,t.target);const re=document.createEvent("MouseEvents");re.initMouseEvent("mousemove",!0,!0,window,0,q+V,Y+I,J+V,ee+I,!1,!1,!1,!1,0,t.target);const oe=document.createEvent("MouseEvents");oe.initMouseEvent("mouseup",!0,!0,window,0,q+V,Y+I,J+V,ee+I,!1,!1,!1,!1,0,t.target),t.target.dispatchEvent(se),await this.waitTimeout(10),t.target.dispatchEvent(re),await this.waitTimeout(10),t.target.dispatchEvent(oe)}}async function y(e){await E(e.waitTime)}async function w(){window.close()}async function T(e){return console.log("eval!",e.code),new Promise(t=>{try{e.async?(window.eval(e.code),setTimeout(()=>{t(window.eval("window.__consentCheckResult"))},e.timeout||250)):t(window.eval(e.code))}catch(r){console.warn("eval error",r,e.code),t(!1)}})}function d(){return crypto&&typeof crypto.randomUUID<"u"?crypto.randomUUID():Math.random().toString()}var k=class{constructor(e,t=1e3){this.id=e,this.promise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.timer=window.setTimeout(()=>{this.reject(new Error("timeout"))},t)}},x={pending:new Map,sendContentMessage:null};function D(e,t){const r=d();x.sendContentMessage({type:"eval",id:r,code:e,snippetId:t});const i=new k(r);return x.pending.set(i.id,i),i.promise}function F(e,t){const r=x.pending.get(e);r?(x.pending.delete(e),r.timer&&window.clearTimeout(r.timer),r.resolve(t)):console.warn("no eval #",e)}var j={EVAL_0:()=>console.log(1),EVAL_CONSENTMANAGER_1:()=>window.__cmp&&typeof __cmp("getCMPData")=="object",EVAL_CONSENTMANAGER_2:()=>!__cmp("consentStatus").userChoiceExists,EVAL_CONSENTMANAGER_3:()=>__cmp("setConsent",0),EVAL_CONSENTMANAGER_4:()=>__cmp("setConsent",1),EVAL_CONSENTMANAGER_5:()=>__cmp("consentStatus").userChoiceExists,EVAL_COOKIEBOT_1:()=>!!window.Cookiebot,EVAL_COOKIEBOT_2:()=>{var e;return!window.Cookiebot.hasResponse&&((e=window.Cookiebot.dialog)==null?void 0:e.visible)===!0},EVAL_COOKIEBOT_3:()=>window.Cookiebot.withdraw()||!0,EVAL_COOKIEBOT_4:()=>window.Cookiebot.hide()||!0,EVAL_COOKIEBOT_5:()=>window.Cookiebot.declined===!0,EVAL_KLARO_1:()=>{var r;const e=globalThis.klaroConfig||((r=globalThis.klaro)==null?void 0:r.getManager)&&globalThis.klaro.getManager().config;if(!e)return!0;const t=(e.services||e.apps).filter(i=>!i.required).map(i=>i.name);if(klaro&&klaro.getManager){const i=klaro.getManager();return t.every(u=>!i.consents[u])}else if(klaroConfig&&klaroConfig.storageMethod==="cookie"){const i=klaroConfig.cookieName||klaroConfig.storageName,u=JSON.parse(decodeURIComponent(document.cookie.split(";").find(I=>I.trim().startsWith(i)).split("=")[1]));return Object.keys(u).filter(I=>t.includes(I)).every(I=>u[I]===!1)}},EVAL_ONETRUST_1:()=>window.OnetrustActiveGroups.split(",").filter(e=>e.length>0).length<=1,EVAL_TRUSTARC_TOP:()=>window&&window.truste&&window.truste.eu.bindMap.prefCookie==="0",EVAL_ADROLL_0:()=>!document.cookie.includes("__adroll_fpc"),EVAL_ALMACMP_0:()=>document.cookie.includes('"name":"Google","consent":false'),EVAL_AFFINITY_SERIF_COM_0:()=>document.cookie.includes("serif_manage_cookies_viewed")&&!document.cookie.includes("serif_allow_analytics"),EVAL_ARBEITSAGENTUR_TEST:()=>document.cookie.includes("cookie_consent=denied"),EVAL_AXEPTIO_0:()=>document.cookie.includes("axeptio_authorized_vendors=%2C%2C"),EVAL_BAHN_TEST:()=>utag.gdpr.getSelectedCategories().length===1,EVAL_BING_0:()=>document.cookie.includes("AL=0")&&document.cookie.includes("AD=0")&&document.cookie.includes("SM=0"),EVAL_BLOCKSY_0:()=>document.cookie.includes("blocksy_cookies_consent_accepted=no"),EVAL_BORLABS_0:()=>!JSON.parse(decodeURIComponent(document.cookie.split(";").find(e=>e.indexOf("borlabs-cookie")!==-1).split("=",2)[1])).consents.statistics,EVAL_BUNDESREGIERUNG_DE_0:()=>document.cookie.match("cookie-allow-tracking=0"),EVAL_CANVA_0:()=>!document.cookie.includes("gtm_fpc_engagement_event"),EVAL_CC_BANNER2_0:()=>!!document.cookie.match(/sncc=[^;]+D%3Dtrue/),EVAL_CLICKIO_0:()=>document.cookie.includes("__lxG__consent__v2_daisybit="),EVAL_CLINCH_0:()=>document.cookie.includes("ctc_rejected=1"),EVAL_COOKIECONSENT2_TEST:()=>document.cookie.includes("cc_cookie="),EVAL_COOKIECONSENT3_TEST:()=>document.cookie.includes("cc_cookie="),EVAL_COINBASE_0:()=>JSON.parse(decodeURIComponent(document.cookie.match(/cm_(eu|default)_preferences=([0-9a-zA-Z\\{\\}\\[\\]%:]*);?/)[2])).consent.length<=1,EVAL_COMPLIANZ_BANNER_0:()=>document.cookie.includes("cmplz_banner-status=dismissed"),EVAL_COOKIE_LAW_INFO_0:()=>CLI.disableAllCookies()||CLI.reject_close()||!0,EVAL_COOKIE_LAW_INFO_1:()=>document.cookie.indexOf("cookielawinfo-checkbox-non-necessary=yes")===-1,EVAL_COOKIE_LAW_INFO_DETECT:()=>!!window.CLI,EVAL_COOKIE_MANAGER_POPUP_0:()=>JSON.parse(document.cookie.split(";").find(e=>e.trim().startsWith("CookieLevel")).split("=")[1]).social===!1,EVAL_COOKIEALERT_0:()=>document.querySelector("body").removeAttribute("style")||!0,EVAL_COOKIEALERT_1:()=>document.querySelector("body").removeAttribute("style")||!0,EVAL_COOKIEALERT_2:()=>window.CookieConsent.declined===!0,EVAL_COOKIEFIRST_0:()=>(e=>e.performance===!1&&e.functional===!1&&e.advertising===!1)(JSON.parse(decodeURIComponent(document.cookie.split(";").find(e=>e.indexOf("cookiefirst")!==-1).trim()).split("=")[1])),EVAL_COOKIEFIRST_1:()=>document.querySelectorAll("button[data-cookiefirst-accent-color=true][role=checkbox]:not([disabled])").forEach(e=>e.getAttribute("aria-checked")=="true"&&e.click())||!0,EVAL_COOKIEINFORMATION_0:()=>CookieInformation.declineAllCategories()||!0,EVAL_COOKIEINFORMATION_1:()=>CookieInformation.submitAllCategories()||!0,EVAL_COOKIEINFORMATION_2:()=>document.cookie.includes("CookieInformationConsent="),EVAL_COOKIEYES_0:()=>document.cookie.includes("advertisement:no"),EVAL_DAILYMOTION_0:()=>!!document.cookie.match("dm-euconsent-v2"),EVAL_DNDBEYOND_TEST:()=>document.cookie.includes("cookie-consent=denied"),EVAL_DSGVO_0:()=>!document.cookie.includes("sp_dsgvo_cookie_settings"),EVAL_DUNELM_0:()=>document.cookie.includes("cc_functional=0")&&document.cookie.includes("cc_targeting=0"),EVAL_ETSY_0:()=>document.querySelectorAll(".gdpr-overlay-body input").forEach(e=>{e.checked=!1})||!0,EVAL_ETSY_1:()=>document.querySelector(".gdpr-overlay-view button[data-wt-overlay-close]").click()||!0,EVAL_EU_COOKIE_COMPLIANCE_0:()=>document.cookie.indexOf("cookie-agreed=2")===-1,EVAL_EU_COOKIE_LAW_0:()=>!document.cookie.includes("euCookie"),EVAL_EZOIC_0:()=>ezCMP.handleAcceptAllClick(),EVAL_EZOIC_1:()=>!!document.cookie.match(/ez-consent-tcf/),EVAL_GOOGLE_0:()=>!!document.cookie.match(/SOCS=CAE/),EVAL_HEMA_TEST_0:()=>document.cookie.includes("cookies_rejected=1"),EVAL_IUBENDA_0:()=>document.querySelectorAll(".purposes-item input[type=checkbox]:not([disabled])").forEach(e=>{e.checked&&e.click()})||!0,EVAL_IUBENDA_1:()=>!!document.cookie.match(/_iub_cs-\d+=/),EVAL_IWINK_TEST:()=>document.cookie.includes("cookie_permission_granted=no"),EVAL_JQUERY_COOKIEBAR_0:()=>!document.cookie.includes("cookies-state=accepted"),EVAL_MEDIAVINE_0:()=>document.querySelectorAll('[data-name="mediavine-gdpr-cmp"] input[type=checkbox]').forEach(e=>e.checked&&e.click())||!0,EVAL_MICROSOFT_0:()=>Array.from(document.querySelectorAll("div > button")).filter(e=>e.innerText.match("Reject|Ablehnen"))[0].click()||!0,EVAL_MICROSOFT_1:()=>Array.from(document.querySelectorAll("div > button")).filter(e=>e.innerText.match("Accept|Annehmen"))[0].click()||!0,EVAL_MICROSOFT_2:()=>!!document.cookie.match("MSCC|GHCC"),EVAL_MOOVE_0:()=>document.querySelectorAll("#moove_gdpr_cookie_modal input").forEach(e=>{!e.disabled&&e.name!=="moove_gdpr_strict_cookies"&&(e.checked=!1)})||!0,EVAL_ONENINETWO_0:()=>document.cookie.includes("CC_ADVERTISING=NO")&&document.cookie.includes("CC_ANALYTICS=NO"),EVAL_OPERA_0:()=>document.cookie.includes("cookie_consent_essential=true")&&!document.cookie.includes("cookie_consent_marketing=true"),EVAL_PAYPAL_0:()=>document.cookie.includes("cookie_prefs")===!0,EVAL_PRIMEBOX_0:()=>!document.cookie.includes("cb-enabled=accepted"),EVAL_PUBTECH_0:()=>document.cookie.includes("euconsent-v2")&&(document.cookie.match(/.YAAAAAAAAAAA/)||document.cookie.match(/.aAAAAAAAAAAA/)||document.cookie.match(/.YAAACFgAAAAA/)),EVAL_REDDIT_0:()=>document.cookie.includes("eu_cookie={%22opted%22:true%2C%22nonessential%22:false}"),EVAL_SIBBO_0:()=>!!window.localStorage.getItem("euconsent-v2"),EVAL_SIRDATA_UNBLOCK_SCROLL:()=>(document.documentElement.classList.forEach(e=>{e.startsWith("sd-cmp-")&&document.documentElement.classList.remove(e)}),!0),EVAL_SNIGEL_0:()=>!!document.cookie.match("snconsent"),EVAL_STEAMPOWERED_0:()=>JSON.parse(decodeURIComponent(document.cookie.split(";").find(e=>e.trim().startsWith("cookieSettings")).split("=")[1])).preference_state===2,EVAL_SVT_TEST:()=>document.cookie.includes('cookie-consent-1={"optedIn":true,"functionality":false,"statistics":false}'),EVAL_TAKEALOT_0:()=>document.body.classList.remove("freeze")||(document.body.style="")||!0,EVAL_TARTEAUCITRON_0:()=>tarteaucitron.userInterface.respondAll(!1)||!0,EVAL_TARTEAUCITRON_1:()=>tarteaucitron.userInterface.respondAll(!0)||!0,EVAL_TARTEAUCITRON_2:()=>document.cookie.match(/tarteaucitron=[^;]*/)[0].includes("false"),EVAL_TAUNTON_TEST:()=>document.cookie.includes("taunton_user_consent_submitted=true"),EVAL_TEALIUM_0:()=>typeof window.utag<"u"&&typeof utag.gdpr=="object",EVAL_TEALIUM_1:()=>utag.gdpr.setConsentValue(!1)||!0,EVAL_TEALIUM_DONOTSELL:()=>{var e;return((e=utag.gdpr.dns)==null?void 0:e.setDnsState(!1))||!0},EVAL_TEALIUM_2:()=>utag.gdpr.setConsentValue(!0)||!0,EVAL_TEALIUM_3:()=>utag.gdpr.getConsentState()!==1,EVAL_TEALIUM_DONOTSELL_CHECK:()=>{var e;return((e=utag.gdpr.dns)==null?void 0:e.getDnsState())!==1},EVAL_TESTCMP_0:()=>window.results.results[0]==="button_clicked",EVAL_TESTCMP_COSMETIC_0:()=>window.results.results[0]==="banner_hidden",EVAL_THEFREEDICTIONARY_0:()=>cmpUi.showPurposes()||cmpUi.rejectAll()||!0,EVAL_THEFREEDICTIONARY_1:()=>cmpUi.allowAll()||!0,EVAL_THEVERGE_0:()=>document.cookie.includes("_duet_gdpr_acknowledged=1"),EVAL_UBUNTU_COM_0:()=>document.cookie.includes("_cookies_accepted=essential"),EVAL_UK_COOKIE_CONSENT_0:()=>!document.cookie.includes("catAccCookies"),EVAL_USERCENTRICS_API_0:()=>typeof UC_UI=="object",EVAL_USERCENTRICS_API_1:()=>!!UC_UI.closeCMP(),EVAL_USERCENTRICS_API_2:()=>!!UC_UI.denyAllConsents(),EVAL_USERCENTRICS_API_3:()=>!!UC_UI.acceptAllConsents(),EVAL_USERCENTRICS_API_4:()=>!!UC_UI.closeCMP(),EVAL_USERCENTRICS_API_5:()=>UC_UI.areAllConsentsAccepted()===!0,EVAL_USERCENTRICS_API_6:()=>UC_UI.areAllConsentsAccepted()===!1,EVAL_USERCENTRICS_BUTTON_0:()=>JSON.parse(localStorage.getItem("usercentrics")).consents.every(e=>e.isEssential||!e.consentStatus),EVAL_WAITROSE_0:()=>Array.from(document.querySelectorAll("label[id$=cookies-deny-label]")).forEach(e=>e.click())||!0,EVAL_WAITROSE_1:()=>document.cookie.includes("wtr_cookies_advertising=0")&&document.cookie.includes("wtr_cookies_analytics=0"),EVAL_WP_COOKIE_NOTICE_0:()=>document.cookie.includes("wpl_viewed_cookie=no"),EVAL_XE_TEST:()=>document.cookie.includes("xeConsentState={%22performance%22:false%2C%22marketing%22:false%2C%22compliance%22:false}"),EVAL_XING_0:()=>document.cookie.includes("userConsent=%7B%22marketing%22%3Afalse"),EVAL_YOUTUBE_DESKTOP_0:()=>!!document.cookie.match(/SOCS=CAE/),EVAL_YOUTUBE_MOBILE_0:()=>!!document.cookie.match(/SOCS=CAE/)};function W(e){return`(${e.toString()})()`}var N={main:!0,frame:!1,urlPattern:""},U=class{constructor(e){this.runContext=N,this.autoconsent=e}get hasSelfTest(){throw new Error("Not Implemented")}get isIntermediate(){throw new Error("Not Implemented")}get isCosmetic(){throw new Error("Not Implemented")}mainWorldEval(e){const t=j[e];if(!t)return console.warn("Snippet not found",e),Promise.resolve(!1);const r=this.autoconsent.config.logs;if(this.autoconsent.config.isMainWorld){r.evals&&console.log("inline eval:",e,t);let u=!1;try{u=!!t.call(globalThis)}catch(I){r.evals&&console.error("error evaluating rule",e,I)}return Promise.resolve(u)}const i=W(t);return r.evals&&console.log("async eval:",e,i),D(i,e).catch(u=>(r.evals&&console.error("error evaluating rule",e,u),!1))}checkRunContext(){const e={...N,...this.runContext},t=window.top===window;return!(t&&!e.main||!t&&!e.frame||e.urlPattern&&!window.location.href.match(e.urlPattern))}detectCmp(){throw new Error("Not Implemented")}async detectPopup(){return!1}optOut(){throw new Error("Not Implemented")}optIn(){throw new Error("Not Implemented")}openCmp(){throw new Error("Not Implemented")}async test(){return Promise.resolve(!0)}click(e,t=!1){return this.autoconsent.domActions.click(e,t)}elementExists(e){return this.autoconsent.domActions.elementExists(e)}elementVisible(e,t){return this.autoconsent.domActions.elementVisible(e,t)}waitForElement(e,t){return this.autoconsent.domActions.waitForElement(e,t)}waitForVisible(e,t,r){return this.autoconsent.domActions.waitForVisible(e,t,r)}waitForThenClick(e,t,r){return this.autoconsent.domActions.waitForThenClick(e,t,r)}wait(e){return this.autoconsent.domActions.wait(e)}hide(e,t){return this.autoconsent.domActions.hide(e,t)}prehide(e){return this.autoconsent.domActions.prehide(e)}undoPrehide(){return this.autoconsent.domActions.undoPrehide()}querySingleReplySelector(e,t){return this.autoconsent.domActions.querySingleReplySelector(e,t)}querySelectorChain(e){return this.autoconsent.domActions.querySelectorChain(e)}elementSelector(e){return this.autoconsent.domActions.elementSelector(e)}},B=class extends U{constructor(e,t){super(t),this.rule=e,this.name=e.name,this.runContext=e.runContext||N}get hasSelfTest(){return!!this.rule.test}get isIntermediate(){return!!this.rule.intermediate}get isCosmetic(){return!!this.rule.cosmetic}get prehideSelectors(){return this.rule.prehideSelectors}async detectCmp(){return this.rule.detectCmp?this._runRulesParallel(this.rule.detectCmp):!1}async detectPopup(){return this.rule.detectPopup?this._runRulesSequentially(this.rule.detectPopup):!1}async optOut(){const e=this.autoconsent.config.logs;return this.rule.optOut?(e.lifecycle&&console.log("Initiated optOut()",this.rule.optOut),this._runRulesSequentially(this.rule.optOut)):!1}async optIn(){const e=this.autoconsent.config.logs;return this.rule.optIn?(e.lifecycle&&console.log("Initiated optIn()",this.rule.optIn),this._runRulesSequentially(this.rule.optIn)):!1}async openCmp(){return this.rule.openCmp?this._runRulesSequentially(this.rule.openCmp):!1}async test(){return this.hasSelfTest?this._runRulesSequentially(this.rule.test):super.test()}async evaluateRuleStep(e){const t=[],r=this.autoconsent.config.logs;if(e.exists&&t.push(this.elementExists(e.exists)),e.visible&&t.push(this.elementVisible(e.visible,e.check)),e.eval){const u=this.mainWorldEval(e.eval);t.push(u)}if(e.waitFor&&t.push(this.waitForElement(e.waitFor,e.timeout)),e.waitForVisible&&t.push(this.waitForVisible(e.waitForVisible,e.timeout,e.check)),e.click&&t.push(this.click(e.click,e.all)),e.waitForThenClick&&t.push(this.waitForThenClick(e.waitForThenClick,e.timeout,e.all)),e.wait&&t.push(this.wait(e.wait)),e.hide&&t.push(this.hide(e.hide,e.method)),e.if){if(!e.if.exists&&!e.if.visible)return console.error("invalid conditional rule",e.if),!1;const u=await this.evaluateRuleStep(e.if);r.rulesteps&&console.log("Condition is",u),u?t.push(this._runRulesSequentially(e.then)):e.else?t.push(this._runRulesSequentially(e.else)):t.push(!0)}if(e.any){for(const u of e.any)if(await this.evaluateRuleStep(u))return!0;return!1}return t.length===0?(r.errors&&console.warn("Unrecognized rule",e),!1):(await Promise.all(t)).reduce((u,I)=>u&&I,!0)}async _runRulesParallel(e){const t=e.map(i=>this.evaluateRuleStep(i));return(await Promise.all(t)).every(i=>!!i)}async _runRulesSequentially(e){const t=this.autoconsent.config.logs;for(const r of e){t.rulesteps&&console.log("Running rule...",r);const i=await this.evaluateRuleStep(r);if(t.rulesteps&&console.log("...rule result",i),!i&&!r.optional)return!1}return!0}},X=class{constructor(e,t){this.name=e,this.config=t,this.methods=new Map,this.runContext=N,this.isCosmetic=!1,t.methods.forEach(r=>{r.action&&this.methods.set(r.name,r.action)}),this.hasSelfTest=!1}get isIntermediate(){return!1}checkRunContext(){return!0}async detectCmp(){return this.config.detectors.map(t=>s(t.presentMatcher)).some(t=>!!t)}async detectPopup(){return this.config.detectors.map(t=>s(t.showingMatcher)).some(t=>!!t)}async executeAction(e,t){return this.methods.has(e)?c(this.methods.get(e),t):!0}async optOut(){return await this.executeAction("HIDE_CMP"),await this.executeAction("OPEN_OPTIONS"),await this.executeAction("HIDE_CMP"),await this.executeAction("DO_CONSENT",[]),await this.executeAction("SAVE_CONSENT"),!0}async optIn(){return await this.executeAction("HIDE_CMP"),await this.executeAction("OPEN_OPTIONS"),await this.executeAction("HIDE_CMP"),await this.executeAction("DO_CONSENT",["D","A","B","E","F","X"]),await this.executeAction("SAVE_CONSENT"),!0}async openCmp(){return await this.executeAction("HIDE_CMP"),await this.executeAction("OPEN_OPTIONS"),!0}async test(){return!0}};function K(e="autoconsent-css-rules"){const t=`style#${e}`,r=document.querySelector(t);if(r&&r instanceof HTMLStyleElement)return r;{const i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,u=document.createElement("style");return u.id=e,i.appendChild(u),u}}function $(e,t,r="display"){const u=`${t} { ${r==="opacity"?"opacity: 0":"display: none"} !important; z-index: -1 !important; pointer-events: none !important; } `;return e instanceof HTMLStyleElement?(e.innerText+=u,t.length>0):!1}async function H(e,t,r){const i=await e();return!i&&t>0?new Promise(u=>{setTimeout(async()=>{u(H(e,t-1,r))},r)}):Promise.resolve(i)}function ne(e){if(!e)return!1;if(e.offsetParent!==null)return!0;{const t=window.getComputedStyle(e);if(t.position==="fixed"&&t.display!=="none")return!0}return!1}function ae(e){return globalThis.structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}function ce(e){const t={enabled:!0,autoAction:"optOut",disabledCmps:[],enablePrehide:!0,enableCosmeticRules:!0,detectRetries:20,isMainWorld:!1,prehideTimeout:2e3,logs:{lifecycle:!1,rulesteps:!1,evals:!1,errors:!0,messages:!1}},r=ae(t);for(const i of Object.keys(t))typeof e[i]<"u"&&(r[i]=e[i]);return r}var Z="#truste-show-consent",le="#truste-consent-required",ue="#truste-consent-button",de="#truste-consent-content",me="#trustarc-banner-overlay",Q="#truste-consent-track",fe=class extends U{constructor(e){super(e),this.name="TrustArc-top",this.prehideSelectors=[".trustarc-banner-container",`.truste_popframe,.truste_overlay,.truste_box_overlay,${Q}`],this.runContext={main:!0,frame:!1},this._shortcutButton=null,this._optInDone=!1}get hasSelfTest(){return!1}get isIntermediate(){return this._optInDone?!1:!this._shortcutButton}get isCosmetic(){return!1}async detectCmp(){const e=this.elementExists(`${Z},${Q}`);return e&&(this._shortcutButton=document.querySelector(le)),e}async detectPopup(){return this.elementVisible(`${de},${me},${Q}`,"all")}openFrame(){this.click(Z)}async optOut(){return this._shortcutButton?(this._shortcutButton.click(),!0):($(K(),`.truste_popframe, .truste_overlay, .truste_box_overlay, ${Q}`),this.click(Z),setTimeout(()=>{K().remove()},1e4),!0)}async optIn(){return this._optInDone=!0,this.click(ue)}async openCmp(){return!0}async test(){return await this.mainWorldEval("EVAL_TRUSTARC_TOP")}},he=class extends U{constructor(){super(...arguments),this.name="TrustArc-frame",this.runContext={main:!1,frame:!0,urlPattern:"^https://consent-pref\\.trustarc\\.com/\\?"}}get hasSelfTest(){return!1}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return!0}async detectPopup(){return this.elementVisible("#defaultpreferencemanager","any")&&this.elementVisible(".mainContent","any")}async navigateToSettings(){return await H(async()=>this.elementExists(".shp")||this.elementVisible(".advance","any")||this.elementExists(".switch span:first-child"),10,500),this.elementExists(".shp")&&this.click(".shp"),await this.waitForElement(".prefPanel",5e3),this.elementVisible(".advance","any")&&this.click(".advance"),await H(()=>this.elementVisible(".switch span:first-child","any"),5,1e3)}async optOut(){return await H(()=>document.readyState==="complete",20,100),await this.waitForElement(".mainContent[aria-hidden=false]",5e3),this.click(".rejectAll")?!0:(this.elementExists(".prefPanel")&&await this.waitForElement('.prefPanel[style="visibility: visible;"]',3e3),this.click("#catDetails0")?(this.click(".submit"),this.waitForThenClick("#gwt-debug-close_id",5e3),!0):this.click(".required")?(this.waitForThenClick("#gwt-debug-close_id",5e3),!0):(await this.navigateToSettings(),this.click(".switch span:nth-child(1):not(.active)",!0),this.click(".submit"),this.waitForThenClick("#gwt-debug-close_id",3e5),!0))}async optIn(){return this.click(".call")||(await this.navigateToSettings(),this.click(".switch span:nth-child(2)",!0),this.click(".submit"),this.waitForElement("#gwt-debug-close_id",3e5).then(()=>{this.click("#gwt-debug-close_id")})),!0}},pe=class extends U{constructor(){super(...arguments),this.name="Cybotcookiebot",this.prehideSelectors=["#CybotCookiebotDialog,#CybotCookiebotDialogBodyUnderlay,#dtcookie-container,#cookiebanner,#cb-cookieoverlay,.modal--cookie-banner,#cookiebanner_outer,#CookieBanner"]}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return await this.mainWorldEval("EVAL_COOKIEBOT_1")}async detectPopup(){return this.mainWorldEval("EVAL_COOKIEBOT_2")}async optOut(){await this.wait(500);let e=await this.mainWorldEval("EVAL_COOKIEBOT_3");return await this.wait(500),e=e&&await this.mainWorldEval("EVAL_COOKIEBOT_4"),e}async optIn(){return this.elementExists("#dtcookie-container")?this.click(".h-dtcookie-accept"):(this.click(".CybotCookiebotDialogBodyLevelButton:not(:checked):enabled",!0),this.click("#CybotCookiebotDialogBodyLevelButtonAccept"),this.click("#CybotCookiebotDialogBodyButtonAccept"),!0)}async test(){return await this.wait(500),await this.mainWorldEval("EVAL_COOKIEBOT_5")}},ge=class extends U{constructor(){super(...arguments),this.name="Sourcepoint-frame",this.prehideSelectors=["div[id^='sp_message_container_'],.message-overlay","#sp_privacy_manager_container"],this.ccpaNotice=!1,this.ccpaPopup=!1,this.runContext={main:!1,frame:!0}}get hasSelfTest(){return!1}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){const e=new URL(location.href);return e.searchParams.has("message_id")&&e.hostname==="ccpa-notice.sp-prod.net"?(this.ccpaNotice=!0,!0):e.hostname==="ccpa-pm.sp-prod.net"?(this.ccpaPopup=!0,!0):(e.pathname==="/index.html"||e.pathname==="/privacy-manager/index.html"||e.pathname==="/ccpa_pm/index.html")&&(e.searchParams.has("message_id")||e.searchParams.has("requestUUID")||e.searchParams.has("consentUUID"))}async detectPopup(){return this.ccpaNotice?!0:this.ccpaPopup?await this.waitForElement(".priv-save-btn",2e3):(await this.waitForElement(".sp_choice_type_11,.sp_choice_type_12,.sp_choice_type_13,.sp_choice_type_ACCEPT_ALL,.sp_choice_type_SAVE_AND_EXIT",2e3),!this.elementExists(".sp_choice_type_9"))}async optIn(){return await this.waitForElement(".sp_choice_type_11,.sp_choice_type_ACCEPT_ALL",2e3),!!(this.click(".sp_choice_type_11")||this.click(".sp_choice_type_ACCEPT_ALL"))}isManagerOpen(){return location.pathname==="/privacy-manager/index.html"||location.pathname==="/ccpa_pm/index.html"}async optOut(){const e=this.autoconsent.config.logs;if(this.ccpaPopup){const t=document.querySelectorAll(".priv-purpose-container .sp-switch-arrow-block a.neutral.on .right");for(const i of t)i.click();const r=document.querySelectorAll(".priv-purpose-container .sp-switch-arrow-block a.switch-bg.on");for(const i of r)i.click();return this.click(".priv-save-btn")}if(!this.isManagerOpen()){if(!await this.waitForElement(".sp_choice_type_12,.sp_choice_type_13"))return!1;if(!this.elementExists(".sp_choice_type_12"))return this.click(".sp_choice_type_13");this.click(".sp_choice_type_12"),await H(()=>this.isManagerOpen(),200,100)}await this.waitForElement(".type-modal",2e4),this.waitForThenClick(".ccpa-stack .pm-switch[aria-checked=true] .slider",500,!0);try{const t=".sp_choice_type_REJECT_ALL",r=".reject-toggle",i=await Promise.race([this.waitForElement(t,2e3).then(u=>u?0:-1),this.waitForElement(r,2e3).then(u=>u?1:-1),this.waitForElement(".pm-features",2e3).then(u=>u?2:-1)]);if(i===0)return await this.wait(1500),this.click(t);i===1?this.click(r):i===2&&(await this.waitForElement(".pm-features",1e4),this.click(".checked > span",!0),this.click(".chevron"))}catch(t){e.errors&&console.warn(t)}return this.click(".sp_choice_type_SAVE_AND_EXIT")}},Ae=class extends U{constructor(){super(...arguments),this.name="consentmanager.net",this.prehideSelectors=["#cmpbox,#cmpbox2"],this.apiAvailable=!1}get hasSelfTest(){return this.apiAvailable}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.apiAvailable=await this.mainWorldEval("EVAL_CONSENTMANAGER_1"),this.apiAvailable?!0:this.elementExists("#cmpbox")}async detectPopup(){return this.apiAvailable?(await this.wait(500),await this.mainWorldEval("EVAL_CONSENTMANAGER_2")):this.elementVisible("#cmpbox .cmpmore","any")}async optOut(){return await this.wait(500),this.apiAvailable?await this.mainWorldEval("EVAL_CONSENTMANAGER_3"):this.click(".cmpboxbtnno")?!0:this.elementExists(".cmpwelcomeprpsbtn")?(this.click(".cmpwelcomeprpsbtn > a[aria-checked=true]",!0),this.click(".cmpboxbtnsave"),!0):(this.click(".cmpboxbtncustom"),await this.waitForElement(".cmptblbox",2e3),this.click(".cmptdchoice > a[aria-checked=true]",!0),this.click(".cmpboxbtnyescustomchoices"),this.hide("#cmpwrapper,#cmpbox","display"),!0)}async optIn(){return this.apiAvailable?await this.mainWorldEval("EVAL_CONSENTMANAGER_4"):this.click(".cmpboxbtnyes")}async test(){if(this.apiAvailable)return await this.mainWorldEval("EVAL_CONSENTMANAGER_5")}},_e=class extends U{constructor(){super(...arguments),this.name="Evidon"}get hasSelfTest(){return!1}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists("#_evidon_banner")}async detectPopup(){return this.elementVisible("#_evidon_banner","any")}async optOut(){return this.click("#_evidon-decline-button")||($(K(),"#evidon-prefdiag-overlay,#evidon-prefdiag-background"),this.click("#_evidon-option-button"),await this.waitForElement("#evidon-prefdiag-overlay",5e3),this.click("#evidon-prefdiag-decline")),!0}async optIn(){return this.click("#_evidon-accept-button")}},Ee=class extends U{constructor(){super(...arguments),this.name="Onetrust",this.prehideSelectors=["#onetrust-banner-sdk,#onetrust-consent-sdk,.onetrust-pc-dark-filter,.js-consent-banner"],this.runContext={urlPattern:"^(?!.*https://www\\.nba\\.com/)"}}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists("#onetrust-banner-sdk,#onetrust-pc-sdk")}async detectPopup(){return this.elementVisible("#onetrust-banner-sdk,#onetrust-pc-sdk","any")}async optOut(){return this.elementVisible("#onetrust-reject-all-handler,.ot-pc-refuse-all-handler,.js-reject-cookies","any")?this.click("#onetrust-reject-all-handler,.ot-pc-refuse-all-handler,.js-reject-cookies"):(this.elementExists("#onetrust-pc-btn-handler")?this.click("#onetrust-pc-btn-handler"):this.click(".ot-sdk-show-settings,button.js-cookie-settings"),await this.waitForElement("#onetrust-consent-sdk",2e3),await this.wait(1e3),this.click("#onetrust-consent-sdk input.category-switch-handler:checked,.js-editor-toggle-state:checked",!0),await this.wait(1e3),await this.waitForElement(".save-preference-btn-handler,.js-consent-save",2e3),this.click(".save-preference-btn-handler,.js-consent-save"),await this.waitForVisible("#onetrust-banner-sdk",5e3,"none"),!0)}async optIn(){return this.click("#onetrust-accept-btn-handler,#accept-recommended-btn-handler,.js-accept-cookies")}async test(){return await H(()=>this.mainWorldEval("EVAL_ONETRUST_1"),10,500)}},ye=class extends U{constructor(){super(...arguments),this.name="Klaro",this.prehideSelectors=[".klaro"],this.settingsOpen=!1}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists(".klaro > .cookie-modal")?(this.settingsOpen=!0,!0):this.elementExists(".klaro > .cookie-notice")}async detectPopup(){return this.elementVisible(".klaro > .cookie-notice,.klaro > .cookie-modal","any")}async optOut(){return this.click(".klaro .cn-decline")||(this.settingsOpen||(this.click(".klaro .cn-learn-more,.klaro .cm-button-manage"),await this.waitForElement(".klaro > .cookie-modal",2e3),this.settingsOpen=!0),this.click(".klaro .cn-decline"))?!0:(this.click(".cm-purpose:not(.cm-toggle-all) > input:not(.half-checked,.required,.only-required),.cm-purpose:not(.cm-toggle-all) > div > input:not(.half-checked,.required,.only-required)",!0),this.click(".cm-btn-accept,.cm-button"))}async optIn(){return this.click(".klaro .cm-btn-accept-all")?!0:this.settingsOpen?(this.click(".cm-purpose:not(.cm-toggle-all) > input.half-checked",!0),this.click(".cm-btn-accept")):this.click(".klaro .cookie-notice .cm-btn-success")}async test(){return await this.mainWorldEval("EVAL_KLARO_1")}},we=class extends U{constructor(){super(...arguments),this.name="Uniconsent"}get prehideSelectors(){return[".unic",".modal:has(.unic)"]}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists(".unic .unic-box,.unic .unic-bar,.unic .unic-modal")}async detectPopup(){return this.elementVisible(".unic .unic-box,.unic .unic-bar,.unic .unic-modal","any")}async optOut(){if(await this.waitForElement(".unic button",1e3),document.querySelectorAll(".unic button").forEach(e=>{const t=e.textContent;(t.includes("Manage Options")||t.includes("Optionen verwalten"))&&e.click()}),await this.waitForElement(".unic input[type=checkbox]",1e3)){await this.waitForElement(".unic button",1e3),document.querySelectorAll(".unic input[type=checkbox]").forEach(e=>{e.checked&&e.click()});for(const e of document.querySelectorAll(".unic button")){const t=e.textContent;for(const r of["Confirm Choices","Save Choices","Auswahl speichern"])if(t.includes(r))return e.click(),await this.wait(500),!0}}return!1}async optIn(){return this.waitForThenClick(".unic #unic-agree")}async test(){return await this.wait(1e3),!this.elementExists(".unic .unic-box,.unic .unic-bar")}},be=class extends U{constructor(){super(...arguments),this.prehideSelectors=[".cmp-root"],this.name="Conversant"}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists(".cmp-root .cmp-receptacle")}async detectPopup(){return this.elementVisible(".cmp-root .cmp-receptacle","any")}async optOut(){if(!await this.waitForThenClick(".cmp-main-button:not(.cmp-main-button--primary)")||!await this.waitForElement(".cmp-view-tab-tabs"))return!1;await this.waitForThenClick(".cmp-view-tab-tabs > :first-child"),await this.waitForThenClick(".cmp-view-tab-tabs > .cmp-view-tab--active:first-child");for(const e of Array.from(document.querySelectorAll(".cmp-accordion-item"))){e.querySelector(".cmp-accordion-item-title").click(),await H(()=>!!e.querySelector(".cmp-accordion-item-content.cmp-active"),10,50);const t=e.querySelector(".cmp-accordion-item-content.cmp-active");t.querySelectorAll(".cmp-toggle-actions .cmp-toggle-deny:not(.cmp-toggle-deny--active)").forEach(r=>r.click()),t.querySelectorAll(".cmp-toggle-actions .cmp-toggle-checkbox:not(.cmp-toggle-checkbox--active)").forEach(r=>r.click())}return await this.click(".cmp-main-button:not(.cmp-main-button--primary)"),!0}async optIn(){return this.waitForThenClick(".cmp-main-button.cmp-main-button--primary")}async test(){return document.cookie.includes("cmp-data=0")}},Ce=class extends U{constructor(){super(...arguments),this.name="tiktok.com",this.runContext={urlPattern:"tiktok"}}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}getShadowRoot(){const e=document.querySelector("tiktok-cookie-banner");return e?e.shadowRoot:null}async detectCmp(){return this.elementExists("tiktok-cookie-banner")}async detectPopup(){const e=this.getShadowRoot().querySelector(".tiktok-cookie-banner");return ne(e)}async optOut(){const e=this.autoconsent.config.logs,t=this.getShadowRoot().querySelector(".button-wrapper button:first-child");return t?(e.rulesteps&&console.log("[clicking]",t),t.click(),!0):(e.errors&&console.log("no decline button found"),!1)}async optIn(){const e=this.autoconsent.config.logs,t=this.getShadowRoot().querySelector(".button-wrapper button:last-child");return t?(e.rulesteps&&console.log("[clicking]",t),t.click(),!0):(e.errors&&console.log("no accept button found"),!1)}async test(){const e=document.cookie.match(/cookie-consent=([^;]+)/);if(!e)return!1;const t=JSON.parse(decodeURIComponent(e[1]));return Object.values(t).every(r=>typeof r!="boolean"||r===!1)}},Se=class extends U{constructor(){super(...arguments),this.runContext={urlPattern:"^https://(www\\.)?airbnb\\.[^/]+/"},this.prehideSelectors=["div[data-testid=main-cookies-banner-container]",'div:has(> div:first-child):has(> div:last-child):has(> section [data-testid="strictly-necessary-cookies"])']}get hasSelfTest(){return!0}get isIntermediate(){return!1}get isCosmetic(){return!1}async detectCmp(){return this.elementExists("div[data-testid=main-cookies-banner-container]")}async detectPopup(){return this.elementVisible("div[data-testid=main-cookies-banner-container","any")}async optOut(){await this.waitForThenClick("div[data-testid=main-cookies-banner-container] button._snbhip0");let e;for(;e=document.querySelector("[data-testid=modal-container] button[aria-checked=true]:not([disabled])");)e.click();return this.waitForThenClick("button[data-testid=save-btn]")}async optIn(){return this.waitForThenClick("div[data-testid=main-cookies-banner-container] button._148dgdpk")}async test(){return await H(()=>!!document.cookie.match("OptanonAlertBoxClosed"),20,200)}},ke=[fe,he,pe,ge,Ae,_e,Ee,ye,we,be,Ce,Se],ve=class{constructor(e){this.autoconsentInstance=e}click(e,t=!1){const r=this.elementSelector(e);return this.autoconsentInstance.config.logs.rulesteps&&console.log("[click]",e,t,r),r.length>0&&(t?r.forEach(i=>i.click()):r[0].click()),r.length>0}elementExists(e){return this.elementSelector(e).length>0}elementVisible(e,t){const r=this.elementSelector(e),i=new Array(r.length);return r.forEach((u,I)=>{i[I]=ne(u)}),t==="none"?i.every(u=>!u):i.length===0?!1:t==="any"?i.some(u=>u):i.every(u=>u)}waitForElement(e,t=1e4){const i=Math.ceil(t/200);return this.autoconsentInstance.config.logs.rulesteps&&console.log("[waitForElement]",e),H(()=>this.elementSelector(e).length>0,i,200)}waitForVisible(e,t=1e4,r="any"){const u=Math.ceil(t/200);return H(()=>this.elementVisible(e,r),u,200)}async waitForThenClick(e,t=1e4,r=!1){return await this.waitForElement(e,t),this.click(e,r)}wait(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}hide(e,t){const r=K();return $(r,e,t)}prehide(e){const t=K("autoconsent-prehide");return this.autoconsentInstance.config.logs.lifecycle&&console.log("[prehide]",t,location.href),$(t,e,"opacity")}undoPrehide(){const e=K("autoconsent-prehide");return this.autoconsentInstance.config.logs.lifecycle&&console.log("[undoprehide]",e,location.href),e&&e.remove(),!!e}querySingleReplySelector(e,t=document){if(e.startsWith("aria/"))return[];if(e.startsWith("xpath/")){const r=e.slice(6),i=document.evaluate(r,t,null,XPathResult.ANY_TYPE,null);let u=null;const I=[];for(;u=i.iterateNext();)I.push(u);return I}return e.startsWith("text/")?[]:e.startsWith("pierce/")?[]:t.shadowRoot?Array.from(t.shadowRoot.querySelectorAll(e)):Array.from(t.querySelectorAll(e))}querySelectorChain(e){let t=document,r;for(const i of e){if(r=this.querySingleReplySelector(i,t),r.length===0)return[];t=r[0]}return r}elementSelector(e){return typeof e=="string"?this.querySingleReplySelector(e):this.querySelectorChain(e)}};function Oe(e,t){return e.filter(r=>(!t.disabledCmps||!t.disabledCmps.includes(r.name))&&(t.enableCosmeticRules||!r.isCosmetic))}var Te=class{constructor(e,t=null,r=null){if(this.id=d(),this.rules=[],this.foundCmp=null,this.state={lifecycle:"loading",prehideOn:!1,findCmpAttempts:0,detectedCmps:[],detectedPopups:[],selfTest:null},x.sendContentMessage=e,this.sendContentMessage=e,this.rules=[],this.updateState({lifecycle:"loading"}),this.addDynamicRules(),t)this.initialize(t,r);else{r&&this.parseDeclarativeRules(r);const i={type:"init",url:window.location.href};e(i),this.updateState({lifecycle:"waitingForInitResponse"})}this.domActions=new ve(this)}initialize(e,t){const r=ce(e);if(r.logs.lifecycle&&console.log("autoconsent init",window.location.href),this.config=r,!r.enabled){r.logs.lifecycle&&console.log("autoconsent is disabled");return}if(t&&this.parseDeclarativeRules(t),this.rules=Oe(this.rules,r),e.enablePrehide)if(document.documentElement)this.prehideElements();else{const i=()=>{window.removeEventListener("DOMContentLoaded",i),this.prehideElements()};window.addEventListener("DOMContentLoaded",i)}if(document.readyState==="loading"){const i=()=>{window.removeEventListener("DOMContentLoaded",i),this.start()};window.addEventListener("DOMContentLoaded",i)}else this.start();this.updateState({lifecycle:"initialized"})}addDynamicRules(){ke.forEach(e=>{this.rules.push(new e(this))})}parseDeclarativeRules(e){Object.keys(e.consentomatic).forEach(t=>{this.addConsentomaticCMP(t,e.consentomatic[t])}),e.autoconsent.forEach(t=>{this.addDeclarativeCMP(t)})}addDeclarativeCMP(e){this.rules.push(new B(e,this))}addConsentomaticCMP(e,t){this.rules.push(new X(`com_${e}`,t))}start(){window.requestIdleCallback?window.requestIdleCallback(()=>this._start(),{timeout:500}):this._start()}async _start(){const e=this.config.logs;e.lifecycle&&console.log(`Detecting CMPs on ${window.location.href}`),this.updateState({lifecycle:"started"});const t=await this.findCmp(this.config.detectRetries);if(this.updateState({detectedCmps:t.map(V=>V.name)}),t.length===0)return e.lifecycle&&console.log("no CMP found",location.href),this.config.enablePrehide&&this.undoPrehide(),this.updateState({lifecycle:"nothingDetected"}),!1;this.updateState({lifecycle:"cmpDetected"});const r=[],i=[];for(const V of t)V.isCosmetic?i.push(V):r.push(V);let u=!1,I=await this.detectPopups(r,async V=>{u=await this.handlePopup(V)});if(I.length===0&&(I=await this.detectPopups(i,async V=>{u=await this.handlePopup(V)})),I.length===0)return e.lifecycle&&console.log("no popup found"),this.config.enablePrehide&&this.undoPrehide(),!1;if(I.length>1){const V={msg:"Found multiple CMPs, check the detection rules.",cmps:I.map(q=>q.name)};e.errors&&console.warn(V.msg,V.cmps),this.sendContentMessage({type:"autoconsentError",details:V})}return u}async findCmp(e){const t=this.config.logs;this.updateState({findCmpAttempts:this.state.findCmpAttempts+1});const r=[];for(const i of this.rules)try{if(!i.checkRunContext())continue;await i.detectCmp()&&(t.lifecycle&&console.log(`Found CMP: ${i.name} ${window.location.href}`),this.sendContentMessage({type:"cmpDetected",url:location.href,cmp:i.name}),r.push(i))}catch(u){t.errors&&console.warn(`error detecting ${i.name}`,u)}return r.length===0&&e>0?(await this.domActions.wait(500),this.findCmp(e-1)):r}async detectPopup(e){if(await this.waitForPopup(e).catch(r=>(this.config.logs.errors&&console.warn(`error waiting for a popup for ${e.name}`,r),!1)))return this.updateState({detectedPopups:this.state.detectedPopups.concat([e.name])}),this.sendContentMessage({type:"popupFound",cmp:e.name,url:location.href}),e;throw new Error("Popup is not shown")}async detectPopups(e,t){const r=e.map(I=>this.detectPopup(I));await Promise.any(r).then(I=>{t(I)}).catch(()=>null);const i=await Promise.allSettled(r),u=[];for(const I of i)I.status==="fulfilled"&&u.push(I.value);return u}async handlePopup(e){return this.updateState({lifecycle:"openPopupDetected"}),this.config.enablePrehide&&!this.state.prehideOn&&this.prehideElements(),this.foundCmp=e,this.config.autoAction==="optOut"?await this.doOptOut():this.config.autoAction==="optIn"?await this.doOptIn():(this.config.logs.lifecycle&&console.log("waiting for opt-out signal...",location.href),!0)}async doOptOut(){const e=this.config.logs;this.updateState({lifecycle:"runningOptOut"});let t;return this.foundCmp?(e.lifecycle&&console.log(`CMP ${this.foundCmp.name}: opt out on ${window.location.href}`),t=await this.foundCmp.optOut(),e.lifecycle&&console.log(`${this.foundCmp.name}: opt out result ${t}`)):(e.errors&&console.log("no CMP to opt out"),t=!1),this.config.enablePrehide&&this.undoPrehide(),this.sendContentMessage({type:"optOutResult",cmp:this.foundCmp?this.foundCmp.name:"none",result:t,scheduleSelfTest:this.foundCmp&&this.foundCmp.hasSelfTest,url:location.href}),t&&!this.foundCmp.isIntermediate?(this.sendContentMessage({type:"autoconsentDone",cmp:this.foundCmp.name,isCosmetic:this.foundCmp.isCosmetic,url:location.href}),this.updateState({lifecycle:"done"})):this.updateState({lifecycle:t?"optOutSucceeded":"optOutFailed"}),t}async doOptIn(){const e=this.config.logs;this.updateState({lifecycle:"runningOptIn"});let t;return this.foundCmp?(e.lifecycle&&console.log(`CMP ${this.foundCmp.name}: opt in on ${window.location.href}`),t=await this.foundCmp.optIn(),e.lifecycle&&console.log(`${this.foundCmp.name}: opt in result ${t}`)):(e.errors&&console.log("no CMP to opt in"),t=!1),this.config.enablePrehide&&this.undoPrehide(),this.sendContentMessage({type:"optInResult",cmp:this.foundCmp?this.foundCmp.name:"none",result:t,scheduleSelfTest:!1,url:location.href}),t&&!this.foundCmp.isIntermediate?(this.sendContentMessage({type:"autoconsentDone",cmp:this.foundCmp.name,isCosmetic:this.foundCmp.isCosmetic,url:location.href}),this.updateState({lifecycle:"done"})):this.updateState({lifecycle:t?"optInSucceeded":"optInFailed"}),t}async doSelfTest(){const e=this.config.logs;let t;return this.foundCmp?(e.lifecycle&&console.log(`CMP ${this.foundCmp.name}: self-test on ${window.location.href}`),t=await this.foundCmp.test()):(e.errors&&console.log("no CMP to self test"),t=!1),this.sendContentMessage({type:"selfTestResult",cmp:this.foundCmp?this.foundCmp.name:"none",result:t,url:location.href}),this.updateState({selfTest:t}),t}async waitForPopup(e,t=5,r=500){const i=this.config.logs;i.lifecycle&&console.log("checking if popup is open...",e.name);const u=await e.detectPopup().catch(I=>(i.errors&&console.warn(`error detecting popup for ${e.name}`,I),!1));return!u&&t>0?(await this.domActions.wait(r),this.waitForPopup(e,t-1,r)):(i.lifecycle&&console.log(e.name,`popup is ${u?"open":"not open"}`),u)}prehideElements(){const e=this.config.logs,t=["#didomi-popup,.didomi-popup-container,.didomi-popup-notice,.didomi-consent-popup-preferences,#didomi-notice,.didomi-popup-backdrop,.didomi-screen-medium"],r=this.rules.reduce((i,u)=>u.prehideSelectors?[...i,...u.prehideSelectors]:i,t);return this.updateState({prehideOn:!0}),setTimeout(()=>{this.config.enablePrehide&&this.state.prehideOn&&!["runningOptOut","runningOptIn"].includes(this.state.lifecycle)&&(e.lifecycle&&console.log("Process is taking too long, unhiding elements"),this.undoPrehide())},this.config.prehideTimeout||2e3),this.domActions.prehide(r.join(","))}undoPrehide(){return this.updateState({prehideOn:!1}),this.domActions.undoPrehide()}updateState(e){Object.assign(this.state,e),this.sendContentMessage({type:"report",instanceId:this.id,url:window.location.href,mainFrame:window.top===window.self,state:this.state})}async receiveMessageCallback(e){var r;const t=(r=this.config)==null?void 0:r.logs;switch(t!=null&&t.messages&&console.log("received from background",e,window.location.href),e.type){case"initResp":this.initialize(e.config,e.rules);break;case"optIn":await this.doOptIn();break;case"optOut":await this.doOptOut();break;case"selfTest":await this.doSelfTest();break;case"evalResp":F(e.id,e.result);break}}}},23904:(M,n,m)=>{"use strict";var b=f(m(58560)),A=m(24440);function f(o){return o&&o.__esModule?o:{default:o}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */(0,A.registerContentScript)({module:"adblocker",matches:["http://*/*","https://*/*"],matchAboutBlank:!0,allFrames:!0,js:[(o,C,p)=>{(0,b.default)(o,!0,async g=>await p.app.modules.adblocker.action("getCosmeticsFilters",g)||{})}]})},9464:()=>{"use strict";/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */},2968:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var m={platform:"webextension",brocfile:"Brocfile.ghostery.js",baseURL:"/cliqz/",pack:"npm pack",publish:'echo "Uploading version: browser-core-$PACKAGE_VERSION.tgz" && aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH/latest.tgz --acl public-read',sourceMaps:!1,format:"common",settings:{BACKGROUND_IMAGE_URL:"https://cdn.ghostery.net/brands-database/database/",CDN_BASEURL:"https://cdn.ghostery.net",ADBLOCKER_BASE_URL:"https://cdn.ghostery.com/adblocker/configs",ANTITRACKING_BASE_URL:"https://cdn.ghostery.com/antitracking",CONFIG_PROVIDER:"https://api.ghostery.net/api/v1/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_HPNV2_DIRECT:"https://collector-hpn.ghostery.net",ENDPOINT_HPNV2_ANONYMOUS:"https://collector-hpn.ghostery.net",ENDPOINT_HUMAN_WEB_PATTERNS:"https://cdn2.ghostery.com/human-web-chromium/hw-patterns.gz",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.privacy.ghostery.net/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.privacy.ghostery.net/config",FEEDBACK:"https://ghostery.net/feedback/",PRIVACY_SCORE_URL:"https://anti-tracking.ghostery.net/api/v1/score?",TRACKER_SCORE_URL:"https://cdn.ghostery.net/privacy-score/privacy_score.json",RESULTS_PROVIDER:"https://api.ghostery.net/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.ghostery.net/api/v1/logging?q=",RICH_HEADER:"https://api.ghostery.net/api/v2/rich-header?path=/v2/map",ROTATED_TOP_NEWS:"rotated-top-news.ghostery.net",SAFE_BROWSING:"https://safe-browsing.ghostery.net",STATISTICS:"https://stats.ghostery.net",SUGGESTIONS_URL:"https://ghostery.net/search?q=",UNINSTALL:"https://ghostery.net/home/offboarding",WTM_API:"https://whotracks.me/data/",SUPPORT_URL:"https://www.ghostery.com/support/",PRIVACY_POLICY_URL:"https://www.ghostery.com/about-ghostery/privacy-statements/",NEW_TAB_URL:"/freshtab/home.html",channel:"CH80",MSGCHANNEL:"web-extension",URL_CHANGED_EVENT_DEBOUNCE:500,ATTRACK_TELEMETRY_PROVIDER:"hpnv2",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["ar","at","au","be","br","ca","ch","cn","cz","de","dk","es","fi","fr","gb","gr","hu","id","in","it","jp","kr","mx","nl","no","nz","ph","pl","pt","ro","ru","se","sg","tr","tw","ua","us"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",HUMAN_WEB_LITE_COLLECTOR_VIA_PROXY:"https://collector-hpn.ghostery.net",HUMAN_WEB_LITE_COLLECTOR_DIRECT:"https://collector-hpn.ghostery.net",HUMAN_WEB_LITE_PATTERNS:"https://cdn2.ghostery.com/human-web-android/patterns.json",HUMAN_WEB_LITE_AUTO_TRIGGER:!0,frameScriptWhitelist:["http://localhost:3000/"]},default_prefs:{"modules.human-web.enabled":!0,"modules.antitracking.enabled":!0,"modules.adblocker.enabled":!0,"modules.insights.enabled":!1,"cliqz-adb":1,attrackBloomFilter:!0,humanWeb:!0,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,attrackCookieTrustReferers:!0,"attrack.cookieMode":"ghostery"},bundles:["core/content-script.bundle.js","hpnv2/worker.wasm.bundle.js","hpnv2/worker.asmjs.bundle.js","human-web/rusha.bundle.js"],modules:["core","human-web","hpnv2","antitracking","webrequest-pipeline","adblocker","insights","hpn-lite","human-web-lite"],environment:"development",isBeta:!1,EXTENSION_VERSION:"1.3.13",VERSION:"1.3.13"};n.default=m},23072:(M,n,m)=>{"use strict";m(50704);var b=A(m(44328));function A(f){return f&&f.__esModule?f:{default:f}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */(0,b.default)()},29099:(M,n,m)=>{"use strict";var b=m(27568),A=m(24440);/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function f(c){let _=c.target,E;try{for(let S=0;S<5;S+=1){if(E=_.innerHTML,E.indexOf("http://")!==-1||E.indexOf("https://")!==-1)return E;_=_.parentNode,S+=1}}catch{}}function o(c,_){const E=[];if(window.parent!==window&&window.document&&window.document.scripts)for(let v=0;v<window.document.scripts.length;v+=1){const L=window.document.scripts[v].src;L.startsWith("http")&&E.push(L)}let S=c.target;S.nodeType!==1&&(S=S.parentNode);let O=null;S.closest("a[href]")&&(O=S.closest("a[href]").getAttribute("href"));const P={target:{baseURI:c.target.baseURI,value:c.target.value,href:c.target.href,parentNode:{href:c.target.parentNode?c.target.parentNode.href:null},linksSrc:E}};_.app.modules.core.action("recordMouseDown",P,f(c),O)}function C(c,_){if(!(0,b.isTopWindow)(c))return;const E=c.document.getElementsByTagName("html").item(0).getAttribute("lang"),S=c.document.querySelector("title"),O=c.document.querySelector("meta[name=description]"),P=c.document.querySelector('meta[property="og:title"]'),v=c.document.querySelector('meta[property="og:description"]'),L=c.document.querySelector('meta[property="og:image"]');_.app.modules.core.action("recordMeta",c.location.href,{title:S&&S.innerHTML,description:O&&O.content,ogTitle:P&&P.content,ogDescription:v&&v.content,ogImage:L&&L.content,lang:E})}function p(){return window.document.documentElement.outerHTML}function g(c){const _=window.document.querySelector(c);try{return _.click(),!0}catch{return!1}}function l(c,_,{shadowRootSelector:E=null,attributeType:S="property"}={}){const O=E?window.document.querySelector(E).shadowRoot:window.document,P=_.split(","),v=(L,R)=>S==="property"?L[R]:L.getAttribute(R);return Array.prototype.map.call(O.querySelectorAll(c),L=>P.length>1?P.reduce((R,a)=>({...R,[a]:v(L,a)}),{}):v(L,_))}function s(c){const _=window.document;return Array.prototype.map.call(_.querySelectorAll(c),E=>window.getComputedStyle(E))}(0,A.registerContentScript)({module:"core",matches:["<all_urls>"],allFrames:!0,matchAboutBlank:!0,js:[(c,_,E)=>{const S=P=>{o(P,E)};c.addEventListener("mousedown",S);const O=()=>{C(c,E)};return c.addEventListener("DOMContentLoaded",O),c.addEventListener("pagehide",()=>{c.removeEventListener("mousedown",S),c.removeEventListener("DOMContentLoaded",O)},{once:!0}),{getHTML:p,click:g,queryHTML:l,queryComputedStyle:s}}]})},67760:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=f(m(37168)),A=f(m(84200));function f(g){return g&&g.__esModule?g:{default:g}}function o(g,l,s){return l in g?Object.defineProperty(g,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):g[l]=s,g}class C{constructor(){o(this,"MAX_BUFFER_LEN",5e3),this.buffer=[],this.onMessage=l=>this.buffer.length<this.MAX_BUFFER_LEN?new Promise((s,c)=>{this.buffer.push({message:l,resolve:s,reject:c})}):Promise.reject(new Error(`content-script actions buffer limit exceeded: ${this.buffer.length} ${this.MAX_BUFFER_LEN}`))}init(){A.default.onMessage.addListener(this.onMessage)}unload(){A.default.onMessage.removeListener(this.onMessage)}}class p{constructor(){this.actions=null,this.messageHandlers=[new C];for(const l of this.messageHandlers)l.init()}unload(){for(const l of this.messageHandlers)l.unload();this.messageHandlers=[]}setActionCallbacks(l){const s=this.messageHandlers[0].buffer;this.unload();for(const[c,_]of Object.entries(l)){const E=new b.default(c,_);for(const{message:S,resolve:O,reject:P}of s){const v=E.onMessage(S);v!==void 0&&v.then(O).catch(P)}E.init(),this.messageHandlers.push(E)}}}n.default=p},44e3:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=m(98360),A=f(m(2968));function f(p){return p&&p.__esModule?p:{default:p}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function o(){}var C=A.default.environment==="development"?b.window.console:new Proxy({},{get(){return o}});n.default=C},27568:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.documentBodyReady=b,n.isTopWindow=m;/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function m(A){return A.self===A.top}function b(){return window.document&&window.document.body?Promise.resolve():new Promise(A=>{window.addEventListener("DOMContentLoaded",A,{once:!0})})}},53340:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=g;/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const m=new Set(["http","https","ws","wss","ftp","ftps","data","file"]),b=/^[.\w_-]+$/;function A(l){return l.replace(/([|.$+?{}()[\]\\])/g,"\\$1").replace(/\*/g,".*")}function f(l){if(l==="*")return new Set(["http","https","ws","wss"]);if(m.has(l))return new Set([l]);throw new Error(`<scheme> is not valid: ${l}`)}function o(l,s){if(s.includes(":"))throw new Error("<host> must not include a port number");if(s.length===0){if(l==="file")return/^$/;throw new Error('<host> is optional only if the scheme is "file"')}const c=s.lastIndexOf("*");if(c!==-1){if(s==="*")return null;if(c!==0)throw new Error("<host> wildcard may only appear at the start");if(s[1]!==".")throw new Error('<host> only "*" and "*." followed by hostname parts are valid');const _=s.slice(2);if(b.test(_)===!1)throw new Error("<host> contains invalid characters");return new RegExp(`^(?:.*[.])?${A(_)}$`)}if(b.test(s)===!1)throw new Error("<host> contains invalid characters");return new RegExp(`^${A(s)}$`)}function C(l){return new RegExp(`^${A(l)}$`)}function p(l){if(l==="<all_urls>")return{scheme:m,host:null,path:null};const s=l.indexOf("://");if(s===-1)throw new Error('<scheme> missing, "://" not found');const c=l.slice(0,s),_=f(c),E=l.indexOf("/",s+3);if(E===-1)throw new Error('<path> missing, "/" not found');const S=l.slice(s+3,E),O=o(c,S),P=l.slice(E+1),v=C(P);return{scheme:_,host:O,path:v}}function g(l,s){const{protocol:c,hostname:_,pathname:E,search:S}=new URL(s),O=p(l);return!(O.scheme.has(c.slice(0,c.length-1))===!1||O.host!==null&&O.host.test(_)===!1||O.path!==null&&O.path.test(`${E.slice(1)}${S}`)===!1)}},24440:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.registerContentScript=g,n.runContentScripts=l;var b=o(m(53340)),A=m(27568),f=o(m(44e3));function o(s){return s&&s.__esModule?s:{default:s}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function C(s,c){if((0,A.isTopWindow)(s)===!1&&c.allFrames!==!0)return!1;let _=s.location.href;if(_==="about:blank"||_==="about:srcdoc"){if(c.matchAboutBlank!==!0||!s.parent)return!1;_=s.parent.location.href}if(c.excludeMatches!==void 0){for(const E of c.excludeMatches)if((0,b.default)(E,_))return!1}for(const E of c.matches)if((0,b.default)(E,_))return!0;return!1}const p=[];function g(s){if(s.module===void 0){f.default.error('"module" property should be specified in content.es',s);return}if(Array.isArray(s.js)===!1){f.default.error('"js" should be an array of functions',s);return}if(Array.isArray(s.matches)===!1){f.default.error('"matches" should be an array of match patterns',s);return}if(s.excludeMatches!==void 0&&Array.isArray(s.excludeMatches)===!1){f.default.error('"excludeMatches" should either be undefined or an array of match patterns',s);return}p.push(s)}function l(s,c,_){const E={};for(const S of p){const{module:O,js:P}=S,{isEnabled:v}=_.app.modules[O]||{isEnabled:!1};if(v&&C(s,S))for(const L of P)try{const R=L(s,c,_)||{};E[O]={...E[O],...R}}catch(R){f.default.error(`CLIQZ content-script failed: ${R} ${R.stack}`)}}return E}},44328:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var b=m(98360),A=C(m(84200)),f=C(m(67760)),o=m(24440);function C(s){return s&&s.__esModule?s:{default:s}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function p(){return A.default.sendMessage({module:"core",action:"status"}).then(s=>({app:s}))}function g(){return new Promise(s=>{b.window.CLIQZ!==void 0?s(b.window.CLIQZ):(b.window.runCliqz=s,p().then(s,()=>{}))})}function l(){if(b.window.document.documentElement.nodeName.toLowerCase()!=="html")return;const s=new f.default;g().then(c=>{for(const[_,E]of Object.entries(c.app.modules))E.action=(S,...O)=>A.default.sendMessage({module:_,action:S,args:O});s.setActionCallbacks((0,o.runContentScripts)(b.window,b.chrome,c)),b.window.addEventListener("pagehide",()=>{s.unload()},{once:!0})})}},38544:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.deadline=p,n.debounce=C,n.nextIdle=l,n.nextTick=g,n.throttle=o,n.tryPromise=c,n.withTimeout=s;var b=f(m(95512)),A=m(77184);function f(_){return _&&_.__esModule?_:{default:_}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function o(_,E,S){let O,P;return(...v)=>{const L=Date.now();O&&L<O+S?(_.clearTimeout(P),P=_.setTimeout(()=>{O=L,E(...v)},S)):(O=L,E(...v))}}function C(_,E){let S=null;return E?function(...P){(0,A.clearTimeout)(S);const v=()=>{S=null,_(...P)};S=(0,A.setTimeout)(v,E)}:_}function p(_,E){return Promise.race([(0,b.default)(E),_])}function g(_,...E){return Promise.resolve().then(()=>_(...E))}function l(){return typeof window>"u"||!window.requestIdleCallback?g(()=>{}):new Promise(_=>{window.requestIdleCallback(_)})}async function s(_,E){let S;try{return S=new Promise((O,P)=>{(0,A.setTimeout)(()=>P(new Error(`Timed out after ${E/1e3} seconds`)),E)}),await Promise.race([_,S])}finally{(0,A.clearTimeout)(S)}}async function c(_,E=1e3){try{return await s(_,E)}catch(S){return`Failed: ${S}`}}},37168:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=A(m(84200));function A(o){return o&&o.__esModule?o:{default:o}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */class f{constructor(C,p){this.onMessage=g=>{if(g.module===C){const l=p[g.action];if(l!==void 0){let s=g.args||[];return g.message!==void 0&&(s=[g.message]),Promise.resolve(l(...s))}}}}init(){b.default.onMessage.addListener(this.onMessage)}unload(){b.default.onMessage.removeListener(this.onMessage)}}n.default=f},95512:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=A;var b=m(77184);/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function A(f){return new Promise(o=>(0,b.setTimeout)(o,f))}},77184:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"clearInterval",{enumerable:!0,get:function(){return b.clearInterval}}),Object.defineProperty(n,"clearTimeout",{enumerable:!0,get:function(){return b.clearTimeout}}),Object.defineProperty(n,"setInterval",{enumerable:!0,get:function(){return b.setInterval}}),Object.defineProperty(n,"setTimeout",{enumerable:!0,get:function(){return b.setTimeout}});var b=m(2852)},75536:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeAclkUrl=m;/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function m(b){const A=new URL(b,"https://www.googleadservices.com");if(A.pathname!=="/pagead/aclk"&&A.pathname!=="/aclk")throw new Error(`Expected Google pagead "aclk" URL. Instead got: ${b}`);const f=C=>!["ved","dct"].includes(C[0]);return[...A.searchParams].filter(f).sort().map(C=>C.join("=")).join("&")}},92288:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parseDom=g;var b=C(m(84200)),A=m(24440),f=m(38544),o=m(75536);function C(s){return s&&s.__esModule?s:{default:s}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function p(s){window.console.error("[human-web] Exception caught:",s)}function g(s,c,_){const E=c.document;try{let S=null;if(S=E.querySelector("script"),S&&S.innerHTML.indexOf("location.replace")>-1){const O=E.querySelector("title").textContent;b.default.sendMessage({module:"human-web",action:"jsRedirect",args:[{message:{location:O,url:E.location.href}}]})}}catch(S){p(S)}try{let S="",O=!1;E.querySelector("#s0p1c0")&&(S=E.querySelector("#s0p1c0").href),E.querySelector("#tads .ads-ad")&&E.querySelector("#tads .ads-ad").offsetParent===null&&(O=!0);const P={type:"dom",ad:S,hidden:O};_.action("contentScriptTopAds",{message:P})}catch(S){p(S)}try{const S={},O=c.document;let P=0;const v={query:{element:"#rso",attribute:"data-async-context"},adSections:["#tads div[data-text-ad]",".pla-unit-container",".pla-hovercard-content-ellip",".cu-container tr"],0:{cu:"a",cuAttr:"data-rw",fu:"a"},1:{cu:"a[id^='plaurlg']",fu:"a[id^='vplaurlg']"},2:{cu:"a[id^='plaurlh']",fu:"a[id^='vplaurlh']"},3:{cu:"a[id^='plaurlt']",fu:"a[id^='vplaurlt']"}},L=O.querySelector(v.query.element);let R="";if(L){R=L.getAttribute(v.query.attribute).replace("query:","");try{R=decodeURIComponent(R)}catch{}}v.adSections.forEach((a,h)=>{Array.prototype.slice.call(O.querySelectorAll(a)).forEach(w=>{const T=v[h].cu,d=v[h].fu,k=w.querySelector(T),x=w.querySelector(d);if(k&&x){const D=v[h].cuAttr||"href",F=(0,o.normalizeAclkUrl)(k.getAttribute(D)),j=v[h].fuAttr||"href";S[F]={ts:Date.now(),query:R,furl:[x.getAttribute("data-preconnect-urls"),x.getAttribute(j)]},P+=1}})}),P>0&&_.action("adClick",{ads:S})}catch(S){p(S)}}function l(s,c,_){const E=s.location.href,S=_.app.modules["human-web"];s.top===s&&s.addEventListener("DOMContentLoaded",()=>{g(E,s,S)});function O(h){return y=>{S.action(h,{target:{baseURI:y.target.baseURI}})}}const P=(0,f.throttle)(s,O("hw:keypress"),250),v=(0,f.throttle)(s,O("hw:mousemove"),250),L=(0,f.throttle)(s,O("hw:scroll"),250),R=(0,f.throttle)(s,O("hw:copy"),250);s.addEventListener("keypress",P),s.addEventListener("mousemove",v),s.addEventListener("scroll",L),s.addEventListener("copy",R);function a(h){if(!(h&&h.target!==s.document)){try{String(s)}catch{return}s.removeEventListener("keypress",P),s.removeEventListener("mousemove",v),s.removeEventListener("scroll",L),s.removeEventListener("copy",R)}}s.addEventListener("pagehide",a)}(0,A.registerContentScript)({module:"human-web",matches:["http://*/*","https://*/*"],js:[l],allFrames:!0})},91764:(M,n,m)=>{"use strict";var b=m(24440),A=m(77184);/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function f(C){const{host:p,hostname:g,pathname:l,protocol:s}=document.location,_=performance.timing.domContentLoadedEventStart-performance.timing.requestStart||0;C.app.modules.insights.action("recordPageInfo",{domain:`${s}//${p}${l}`,host:g,timestamp:performance.timing.navigationStart,latency:_,pageTiming:{timing:{navigationStart:performance.timing.navigationStart,loadEventEnd:performance.timing.loadEventEnd}}})}function o(C,p,g){document.readyState!=="complete"?C.addEventListener("load",()=>{(0,A.setTimeout)(()=>{f(g)},1)}):f(g)}(0,b.registerContentScript)({module:"insights",matches:["http://*/*","https://*/*"],js:[o]})},50704:(M,n,m)=>{"use strict";m(29099),m(92288),m(9464),m(23904),m(91764)},98360:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.window=n.chrome=void 0;/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const m=typeof browser<"u"?browser:chrome;n.chrome=m;const b=window;n.window=b},58560:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return b.injectCosmetics}});var b=m(76060)},84200:(M,n,m)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=A(m(49384));function A(o){return o&&o.__esModule?o:{default:o}}/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */var f=(typeof browser<"u"?browser:b.default).runtime;n.default=f},2852:(M,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setTimeout=n.setInterval=n.clearTimeout=n.clearInterval=void 0;/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const m=(...o)=>(typeof setTimeout>"u"?window.setTimeout.bind(window):setTimeout)(...o);n.setTimeout=m;const b=(...o)=>(typeof setInterval>"u"?window.setInterval.bind(window):setInterval)(...o);n.setInterval=b;const A=(...o)=>(typeof clearTimeout>"u"?window.clearTimeout.bind(window):clearTimeout)(...o);n.clearTimeout=A;const f=(...o)=>(typeof clearInterval>"u"?window.clearInterval.bind(window):clearInterval)(...o);n.clearInterval=f},49384:function(M,n){var m,b,A;(function(f,o){if(!0)b=[M],m=o,A=typeof m=="function"?m.apply(n,b):m,A!==void 0&&(M.exports=A);else var C})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:this,function(f){"use strict";if(typeof browser>"u"||Object.getPrototypeOf(browser)!==Object.prototype){const o="The message port closed before a response was received.",C="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",p=g=>{const l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(k,x=void 0){super(x),this.createItem=k}get(k){return this.has(k)||this.set(k,this.createItem(k)),super.get(k)}}const c=d=>d&&typeof d=="object"&&typeof d.then=="function",_=(d,k)=>(...x)=>{g.runtime.lastError?d.reject(g.runtime.lastError):k.singleCallbackArg||x.length<=1&&k.singleCallbackArg!==!1?d.resolve(x[0]):d.resolve(x)},E=d=>d==1?"argument":"arguments",S=(d,k)=>function(D,...F){if(F.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${E(k.minArgs)} for ${d}(), got ${F.length}`);if(F.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${E(k.maxArgs)} for ${d}(), got ${F.length}`);return new Promise((j,W)=>{if(k.fallbackToNoCallback)try{D[d](...F,_({resolve:j,reject:W},k))}catch(N){console.warn(`${d} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,N),D[d](...F),k.fallbackToNoCallback=!1,k.noCallback=!0,j()}else k.noCallback?(D[d](...F),j()):D[d](...F,_({resolve:j,reject:W},k))})},O=(d,k,x)=>new Proxy(k,{apply(D,F,j){return x.call(F,d,...j)}});let P=Function.call.bind(Object.prototype.hasOwnProperty);const v=(d,k={},x={})=>{let D=Object.create(null),F={has(W,N){return N in d||N in D},get(W,N,U){if(N in D)return D[N];if(!(N in d))return;let B=d[N];if(typeof B=="function")if(typeof k[N]=="function")B=O(d,d[N],k[N]);else if(P(x,N)){let X=S(N,x[N]);B=O(d,d[N],X)}else B=B.bind(d);else if(typeof B=="object"&&B!==null&&(P(k,N)||P(x,N)))B=v(B,k[N],x[N]);else if(P(x,"*"))B=v(B,k[N],x["*"]);else return Object.defineProperty(D,N,{configurable:!0,enumerable:!0,get(){return d[N]},set(X){d[N]=X}}),B;return D[N]=B,B},set(W,N,U,B){return N in D?D[N]=U:d[N]=U,!0},defineProperty(W,N,U){return Reflect.defineProperty(D,N,U)},deleteProperty(W,N){return Reflect.deleteProperty(D,N)}},j=Object.create(d);return new Proxy(j,F)},L=d=>({addListener(k,x,...D){k.addListener(d.get(x),...D)},hasListener(k,x){return k.hasListener(d.get(x))},removeListener(k,x){k.removeListener(d.get(x))}});let R=!1;const a=new s(d=>typeof d!="function"?d:function(x,D,F){let j=!1,W,N=new Promise(K=>{W=function($){R||(console.warn(C,new Error().stack),R=!0),j=!0,K($)}}),U;try{U=d(x,D,W)}catch(K){U=Promise.reject(K)}const B=U!==!0&&c(U);if(U!==!0&&!B&&!j)return!1;const X=K=>{K.then($=>{F($)},$=>{let H;$&&($ instanceof Error||typeof $.message=="string")?H=$.message:H="An unexpected error occurred",F({__mozWebExtensionPolyfillReject__:!0,message:H})}).catch($=>{console.error("Failed to send onMessage rejected reply",$)})};return X(B?U:N),!0}),h=({reject:d,resolve:k},x)=>{g.runtime.lastError?g.runtime.lastError.message===o?k():d(g.runtime.lastError):x&&x.__mozWebExtensionPolyfillReject__?d(new Error(x.message)):k(x)},y=(d,k,x,...D)=>{if(D.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${E(k.minArgs)} for ${d}(), got ${D.length}`);if(D.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${E(k.maxArgs)} for ${d}(), got ${D.length}`);return new Promise((F,j)=>{const W=h.bind(null,{resolve:F,reject:j});D.push(W),x.sendMessage(...D)})},w={runtime:{onMessage:L(a),onMessageExternal:L(a),sendMessage:y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},T={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":T},services:{"*":T},websites:{"*":T}},v(g,w,l)};if(typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");f.exports=p(chrome)}else f.exports=browser})}},te={};function G(M){var n=te[M];if(n!==void 0)return n.exports;var m=te[M]={exports:{}};return ie[M].call(m.exports,m,m.exports,G),m.exports}G.n=M=>{var n=M&&M.__esModule?()=>M.default:()=>M;return G.d(n,{a:n}),n},G.d=(M,n)=>{for(var m in n)G.o(n,m)&&!G.o(M,m)&&Object.defineProperty(M,m,{enumerable:!0,get:n[m]})},G.o=(M,n)=>Object.prototype.hasOwnProperty.call(M,n);var Pe={};(()=>{"use strict";var M=G(23072),n=G(15764),m=G.n(n);if(document.contentType==="text/html"){const o=new(m())(C=>chrome.runtime.sendMessage({...C,action:"autoconsent"}));chrome.runtime.onMessage.addListener(C=>C.action==="autoconsent"?Promise.resolve(o.receiveMessageCallback(C)):!1)}function b(o,C="440px"){if(document.querySelector("ghostery-iframe-wrapper"))return;const p=document.createElement("ghostery-iframe-wrapper"),g=p.attachShadow({mode:"closed"}),l=document.createElement("template");l.innerHTML=`
    <iframe src="${o}" frameborder="0"></iframe>
    <style>
      :host {
        all: initial;
        display: flex !important;
        align-items: flex-end;
        position: fixed;
        top: 10px;
        right: 10px;
        left: 10px;
        bottom: 10px;
        z-index: 2147483647;
        pointer-events: none;
      }

      iframe {
        display: block;
        flex-grow: 1;
        width: min(100%, ${C});
        pointer-events: auto;
        box-shadow: 30px 60px 160px rgba(0, 0, 0, 0.4);
        border-radius: 16px;
        background: linear-gradient(90deg, rgba(0, 0, 0, 0.13) 0%, rgba(0, 0, 0, 0.27) 100%);
        opacity: 0;
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        transform: translateY(20px);
      }

      iframe.active {
        opacity: 1;
        transform: translateY(0);
      }

      @media screen and (min-width: 640px) {
        :host {
          justify-content: flex-end;
          align-items: start;
        }

        iframe {
          flex-grow: 0;
          transform: translateY(-20px);
          max-width: ${C};
        }
      }
    </style>
  `,g.appendChild(l.content),document.documentElement.appendChild(p);const s=g.querySelector("iframe");setTimeout(()=>{s.classList.add("active")},100),window.addEventListener("message",c=>{var _;switch((_=c.data)==null?void 0:_.type){case"ghostery-resize-iframe":{const{height:E,width:S}=c.data;s.style.height=E+"px",S&&(s.style.width=S+"px");break}case"ghostery-close-iframe":c.data.clear&&chrome.runtime.sendMessage({action:"clearIframe",url:o}),c.data.reload?window.location.reload():p.parentElement&&setTimeout(()=>p.parentElement.removeChild(p),0);break;case"ghostery-clear-iframe":s.src===c.data.url&&p.parentElement&&setTimeout(()=>p.parentElement.removeChild(p),0);break;default:break}})}function A(o=!1,C=!1){setTimeout(()=>{window.parent.postMessage({type:"ghostery-close-iframe",reload:o,clear:C},"*")},100)}function f(o){new ResizeObserver(()=>{window.parent.postMessage({type:"ghostery-resize-iframe",height:document.body.clientHeight,width:o},"*")}).observe(document.body,{box:"border-box"}),document.body.style.overflow="hidden",chrome.runtime.onMessage.addListener(p=>{p.action==="clearIframe"&&(console.log("clearIframe",p.url),window.parent.postMessage({type:"ghostery-clear-iframe",url:p.url},"*"))})}chrome.runtime.onMessage.addListener(o=>{o.action==="renew:show"&&b(chrome.runtime.getURL(`app/templates/renew.html?timestamp=${o.timestamp}`),"460px")})})()})();
